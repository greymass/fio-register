(this["webpackJsonpfio-register"]=this["webpackJsonpfio-register"]||[]).push([[0],{409:function(e,t,a){e.exports=a(815)},452:function(e,t){},454:function(e,t){},536:function(e,t){},557:function(e,t){},558:function(e,t){},814:function(e,t,a){},815:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(89),c=a.n(o),s=a(25),l=a(26),i=a(27),u=a(28),d=a(371),m=a(372),f=a(234),p=a(239),E=a(830),h=a(825),C=a(397),g=a(833),b=a(831),O=a(832),S=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.ual.activeUser;return e?r.a.createElement(p.a,{secondary:!0,stacked:!0},r.a.createElement(g.a,null,r.a.createElement(g.a.Content,null,r.a.createElement(g.a.Subheader,null,"Current Account"),r.a.createElement("span",null,e.accountName,"@",e.requestPermission)),r.a.createElement(O.a,{basic:!0,onClick:this.props.ual.logout,style:{marginLeft:"1em"}},"Sign out"))):r.a.createElement(O.a,{content:"Sign in",onClick:this.props.ual.showModal,size:"large",primary:!0})}}]),a}(n.Component),A=a(106),T=a(42),v=a(829),N=a(169),R=a(19),w=a.n(R),B=a(51),I=a(46),_=a(827),y=a(107),D=a(826),L=["BTC","EOS","$DAG","8BIT","ABA","ABBC","ABT","AC","ACC","ACM","ACT","ADA","ADF","ADS","AE","AEON","AERGO","AGM","AIB","AILE","AIN","AION","AKA","ALGO","AMA","AMO","AMS","ANDES","ANK","ANON","AOA","AQUA","AR","ARA","ARDR","AREPA","ARG","ARK","ARW","ASF","ASK","ATC","ATH","ATN","ATOM","ATP","ATS","AUDAX","AUR","AUX","AXE","AYA","BALLZ","BANANO","BAND","BARE","BBC","BC","BCA","BCC","BCD","BCH","BCN","BCO","BCS","BCX","BCZ","BEAM","BEET","BELA","BELL","BHD","BHT","BIFI","BIGUP","BIO","BIP","BIQ","BIS","BITB","BITC","BITG","BKT","BLAST","BLK","BLOCK","BMV","BNB","BND","BNT","BOLD","BOLI","BOPO","BOXY","BPA","BRAVO","BRIT","BRK","BSD","BSQ","BST","BSV","BTA","BTC2","BTC2X","BTCC","BTCD","BTCP","BTCR","BTCS","BTCV","BTCZ","BTDX","BTF","BTG","BTH","BTM","BTN","BTP","BTQ","BTR","BTS","BTT","BTV","BTW","BTX","BTY","BU","BURST","BUZZ","BZX","CCA","CCC","CCN","CCX","CDN","CDY","CENNZ","CET","CFX","cGLD","CHC","CHX","CITY","CKB","CLAM","CLC","CLO","CLR","CLUB","CLX","CMM","CMP","CMT","CNMC","COCOS","COIN","COLX","COS","CPC","CPS","CPU","CRAVE","CRO","CRP","CRUZ","CRW","CRX","CS","CSC","CSDT","CYB","CZR","DAPS","DASH","DBIC","DBT","DCR","DCT","DEO","DFC","DGB","DGC","DGLD","DIN","DIVI","DLC","DMD","DMTC","DNR","DOGE","DOGEC","DONU","DOPE","DOT","DROP","DSM","DST","DT3","DTP","DVT","DX","DXN","DYN","EARTH","EARTHS","EAST","EBST","EC","ECA","ECC","ECN","EDRC","EFL","EGEM","ELA","ELF","ELLA","EM","EMC2","EOSC","ERC","ERE","ERG","ESN","ESS","ETC","ETF","ETH","ETHO","ETI","ETN","ETP","ETSC","EUNO","EVE","EVO","EVT","EWT","EXCL","EXOS","EXP","FAIR","FC8","FCH","FCT","FCTID","FIC","FIL","FIMK","FIN","FIO","FIX","FJC","FLASH","FLO","FLUID","FO","FREE","FRST","FSN","FTC","FXTC","GALI","GAME","GARD","GB","GBT","GBX","GC","GCR","GENOM","GFN","GIN","GLEEC","GNX","GO","GOD","GRC","GRS","GXC","GXX","HASH","HATCH","HDD","HEAT","HET","HLM","HNC","HNS","HODL","HPB","HSN","HSR","HTDF","HTH","HTML","HTR","HUSH","HYC","HYD","ICU","ICX","ILT","IMG","INSN","IOC","ION","IOP","IOST","IOTA","IoTE","IOTX","IOV","IPC","IPOS","IXC","JBS","JCT","KAL","KAVA","KETH","KEX","KIN","KMD","KOBO","KOTO","KPG","KPL","KSM","KTS","KTV","KUMA","kUSD","KUVA","LAMB","LAT","LAX","LBC","LBTC","LCC","LCH","LDCN","LET","LHD","LINDA","LINX","LKR","LMO","LN","LOKI","LSK","LTC","LTHN","LTO","LTZ","LUNA","LUX","LV","LYRA","MAN","MARS","MASS","MBRS","MCASH","MCM","MDM","MEC","MED","MEM","MESG","META","MIX","MNP","MNX","MOAC","MOIN","MONA","MONK","MOON","MSR","MTNS","MTR","MUE","MUSIC","MXT","MXW","MZC","N8V","NANO","NAS","NAV","NBT","NCH","NEAR","NEBL","NEET","NEO","NEOS","NIM","NIX","NLC2","NLG","NMC","NODE","NOLLAR","NOS","NPW","NRG","NRO","NSR","NTY","NUKO","NULS","NVC","NXS","NXT","NYC","NYZO","OBSR","OCEAN","ODN","ODX","OGC","OGO","OK","OKP","OLO","OLT","OMNI","ONE","ONION","ONT","ONX","OOT","PART","PCN","PCX","PESO","PEXA","PHL","PHR","PINK","PION","PIRL","PIVX","PKB","PKC","PKT","PLUG","PND","POA","POLIS","POT","PPC","PRJ","PRKL","PSB","PTC","PTN","PUT","PWR","QBC","QKC","QLC","QOS","QRK","QRL","QTUM","QVT","RAP","RBTC","RBY","RDD","REOSC","RES","RIC","RICHX","RIL","RIN","RISE","RITO","RNG","ROGER","ROI","ROSE","RPD","RPT","RUPX","RUTA","RVN","RYO","SAFE","SBC","SBTC","SDC","SDGO","SEELE","SEM","SEOS","SEQ","SFRX","SH","SHARD","SHIT","SHM","SHN","SHR","SIN","SKY","SLP","SLR","SLU","SLX","SMART","SMLY","SNOW","SOL","SOOM","SOV","SOX","SPL","SSC","SSN","SSP","STAK","START","STASH","STEEM","STO","STRAT","STX","SUGAR","SUM","SUMO","SWIFT","SWTC","SYS","TAN","TEA","TELOS","TEO","TES","THC","THETA","THT","TKEY","TNET","TOA","TOMO","TON","TPAY","TPC","TRC","TRTL","TRUE","TRX","TT","TWINS","TZC","UBQ","UC","UFO","UGAS","ULC","UMBRU","UND","UNIFY","UNO","USC","USDP","USE","UTE","VAR","VASH","VC","VCT","VDL","VEE","VEIL","VEO","VESTX","VET","VGO","VIA","VIPS","VITAE","VITE","VIVO","VNSC","VOX","VSYS","VTC","WAN","WAVES","WBTC","WC","WE","WEB","WGR","WHL","WICC","WOW","X42","XAS","XAX","XBC","XBI","XCH","XCP","XCX","XDAI","XDN","XEM","XERO","XFE","XHB","XLM","XLR","XMCC","XMR","XMX","XMY","XND","XNOS","XNS","XPC","XPM","XRD","XRP","XRPHD","XSEL","XSG","XSN","XSPEC","XST","XTH","XTL","XTNC","XTX","XTZ","XUEZ","XVG","XWC","XYM","XZC","YAP","YCC","YCE","YEC","YEE","ZBUX","ZCL","ZCR","ZEC","ZEL","ZEN","ZER","ZEST","ZIL","ZILLA","ZNY","ZNZ","ZOC","ZOOM","ZPM","ZRC","ZSLP","ZVC","ZY"],X={fio_address:"",public_addresses:[],max_fee:"",actor:"",tpid:"tpid@greymass"},M=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).onOpen=function(e,t){n.resetData(),n.getAccount(),n.getBalance(),n.getFee()},n.resetData=function(){return n.setState({account:void 0,balance:void 0,errors:[],fee:void 0,fields:Object.assign({},X,{fio_address:n.props.address.name})})},n.getAccount=function(){var e=n.props.ual.activeUser;e.rpc.get_account(e.accountName).then((function(t){n.setState({account:t,fields:Object.assign({},n.state.fields,{actor:e.accountName})})}))},n.getBalance=function(){var e=n.props.ual.activeUser;e.rpc.get_currency_balance("fio.token",e.accountName,"fio").then((function(e){return n.setState({balance:e})}))},n.getFee=function(){n.props.ual.activeUser.rpc.get_table_rows({code:"fio.fee",table:"fiofees",scope:"fio.fee",key_type:"i128",index_position:2,lower_bound:"0x1769ecaf35c00341b5a2e1760114648e",upper_bound:"0x1769ecaf35c00341b5a2e1760114648e",limit:1}).then((function(e){n.setState({fee:e.rows[0],fields:Object.assign({},n.state.fields,{max_fee:e.rows[0].suf_amount})})}))},n.hide=function(){return n.setState({show:!1})},n.show=function(){return n.setState({show:!0})},n.onChange=function(e,t){var a=t.name,r=t.value;return n.setState({fields:Object.assign({},n.state.fields,Object(I.a)({},a,r))})},n.onChangeAddress=function(e,t){var a=t.name,r=t.value;console.log(a,r),n.setState({fields:Object.assign({},n.state.fields,{public_addresses:[Object.assign({},n.state.fields.public_addresses[0],Object(I.a)({},a,r))]})})},n.transact=Object(B.a)(w.a.mark((function e(){var t,a,r,o,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.fields,a=n.props.ual.activeUser,e.prev=2,r=a.accountName,o=a.requestPermission,c={actions:[{account:"fio.address",name:"addaddress",authorization:[{actor:r,permission:o}],data:t}]},e.next=7,a.signTransaction(c,{expireSeconds:120,blocksBehind:3});case 7:n.props.onSuccess(),n.hide(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0),n.setState({errors:e.t0.cause.json.fields});case 15:case"end":return e.stop()}}),e,null,[[2,11]])}))),n.symbols=L.map((function(e){return{key:e,text:e,value:e}})),n.state={account:void 0,balance:void 0,errors:[],fee:void 0,fields:Object.assign({},X,{fio_address:n.props.address.name}),show:!1},console.log(n.props.address.name),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.balance,n=t.errors,o=t.fee,c=t.fields,s=t.show;return r.a.createElement(_.a,{closeIcon:!0,content:r.a.createElement(p.a,{padded:!0,size:"large",style:{marginTop:0}},r.a.createElement(p.a,{color:"blue",secondary:!0},r.a.createElement(v.a,{size:"large"},r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Cell,null,"Current FIO Balance"),r.a.createElement(v.a.Cell,{textAlign:"right"},a?r.a.createElement("strong",null,a[0]):r.a.createElement(y.a,{name:"spinner",loading:!0}))),r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Cell,null,"Address Registration Fee"),r.a.createElement(v.a.Cell,{textAlign:"right"},o?r.a.createElement("strong",null,(o.suf_amount/1e9).toFixed(9)," FIO"):r.a.createElement(y.a,{name:"spinner",loading:!0}))))),r.a.createElement(D.a,{error:n.length,onSubmit:this.transact},Object.keys(c).map((function(t){var a=n.filter((function(e){return e.name===t})),o=Object(T.a)(a,1)[0];return"tpid"!==t&&("public_addresses"===t?r.a.createElement(D.a.Field,null,r.a.createElement("label",null,"Chain Code"),r.a.createElement(D.a.Dropdown,{autoFocus:!0,onChange:e.onChangeAddress,options:e.symbols,name:"chain_code",search:!0,selection:!0}),r.a.createElement("label",null,"Token Symbol"),r.a.createElement(D.a.Input,{name:"token_code",onChange:e.onChangeAddress,search:!0,selection:!0}),r.a.createElement("label",null,"Public Address"),r.a.createElement(D.a.Input,{name:"public_address",onChange:e.onChangeAddress,search:!0,selection:!0})):r.a.createElement(D.a.Field,null,r.a.createElement("label",{style:{textTransform:"capitalize"}},t.replace("_"," ")),r.a.createElement(D.a.Input,{error:!!o&&{content:o.error,pointing:"above"},name:t,onChange:e.onChange,value:c[t]})))})),r.a.createElement(b.a,{error:!0,header:"An error occurred while submitting the transaction",content:"Check the red fields above to correct the problems and try again."}),r.a.createElement(p.a,{basic:!0,clearing:!0},r.a.createElement(O.a,{content:"Add Address Association",floated:"right",primary:!0})))),header:"Associate an address",open:s,onClose:this.hide,onOpen:this.onOpen,trigger:r.a.createElement(O.a,{basic:!0,content:"Add Address Association",icon:"plus",onClick:this.show,primary:!0,size:"small"})})}}]),a}(n.Component),j={fio_address:"",max_fee:"",actor:"",tpid:"tpid@greymass"},F=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).onOpen=function(e,t){n.resetData(),n.getAccount(),n.getBalance(),n.getFee()},n.resetData=function(){return n.setState({account:void 0,balance:void 0,errors:[],fee:void 0,fields:Object.assign({},j,{fio_address:n.props.address.name})})},n.getAccount=function(){var e=n.props.ual.activeUser;e.rpc.get_account(e.accountName).then((function(t){n.setState({account:t,fields:Object.assign({},n.state.fields,{actor:e.accountName})})}))},n.getBalance=function(){var e=n.props.ual.activeUser;e.rpc.get_currency_balance("fio.token",e.accountName,"fio").then((function(e){return n.setState({balance:e})}))},n.getFee=function(){n.props.ual.activeUser.rpc.get_table_rows({code:"fio.fee",table:"fiofees",scope:"fio.fee",key_type:"i128",index_position:2,lower_bound:"0x006297f2f6c829f9ea733362cd1d3e3a",upper_bound:"0x006297f2f6c829f9ea733362cd1d3e3a",limit:1}).then((function(e){n.setState({fee:e.rows[0],fields:Object.assign({},n.state.fields,{max_fee:e.rows[0].suf_amount})})}))},n.hide=function(){return n.setState({show:!1})},n.show=function(){return n.setState({show:!0})},n.onChange=function(e,t){var a=t.name,r=t.value;return n.setState({fields:Object.assign({},n.state.fields,Object(I.a)({},a,r))})},n.transact=Object(B.a)(w.a.mark((function e(){var t,a,r,o,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.fields,a=n.props.ual.activeUser,e.prev=2,r=a.accountName,o=a.requestPermission,c={actions:[{account:"fio.address",name:"renewaddress",authorization:[{actor:r,permission:o}],data:t}]},e.next=7,a.signTransaction(c,{expireSeconds:120,blocksBehind:3});case 7:n.props.onSuccess(),n.hide(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),n.setState({errors:e.t0.cause.json.fields});case 14:case"end":return e.stop()}}),e,null,[[2,11]])}))),n.state={account:void 0,balance:void 0,errors:[],fee:void 0,fields:Object.assign({},j,{fio_address:n.props.address.name}),show:!1},console.log(n.props.address.name),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.balance,n=t.errors,o=t.fee,c=t.fields,s=t.show;return r.a.createElement(_.a,{closeIcon:!0,content:r.a.createElement(p.a,{padded:!0,size:"large",style:{marginTop:0}},r.a.createElement(p.a,{color:"blue",secondary:!0},r.a.createElement(v.a,{size:"large"},r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Cell,null,"Current FIO Balance"),r.a.createElement(v.a.Cell,{textAlign:"right"},a?r.a.createElement("strong",null,a[0]):r.a.createElement(y.a,{name:"spinner",loading:!0}))),r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Cell,null,"Address Registration Fee"),r.a.createElement(v.a.Cell,{textAlign:"right"},o?r.a.createElement("strong",null,(o.suf_amount/1e9).toFixed(9)," FIO"):r.a.createElement(y.a,{name:"spinner",loading:!0}))))),r.a.createElement(D.a,{error:n.length,onSubmit:this.transact},Object.keys(c).map((function(t){var a=n.filter((function(e){return e.name===t})),o=Object(T.a)(a,1)[0];return"tpid"!==t&&r.a.createElement(D.a.Field,null,r.a.createElement("label",{style:{textTransform:"capitalize"}},t.replace("_"," ")),r.a.createElement(D.a.Input,{error:!!o&&{content:o.error,pointing:"above"},name:t,onChange:e.onChange,value:c[t]}))})),r.a.createElement(b.a,{error:!0,header:"An error occurred while submitting the transaction",content:"Check the red fields above to correct the problems and try again."}),r.a.createElement(p.a,{basic:!0,clearing:!0},r.a.createElement(O.a,{content:"Renew Address",floated:"right",primary:!0})))),header:"Renew FIO Address",open:s,onClose:this.hide,onOpen:this.onOpen,trigger:r.a.createElement(O.a,{basic:!0,content:"Renew Address",onClick:this.show,primary:!0,size:"small"})})}}]),a}(n.Component),x=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={addresses:[]},e.sync=function(){var t=e.props.ual.activeUser;e.getAddresses(t.accountName)},e.onSuccess=function(){e.sync()},e.getAddresses=function(t){e.props.ual.activeUser.rpc.get_table_rows({code:"fio.address",table:"fionames",scope:"fio.address",key_type:"name",index_position:4,lower_bound:t,upper_bound:t,limit:10}).then((function(a){var n={owner_account:t},r=Object(N.partition)(e.state.addresses,n),o=Object(T.a)(r,2)[1];e.setState({addresses:[].concat(Object(A.a)(o),Object(A.a)(a.rows))})}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.ual.activeUser&&this.sync()}},{key:"render",value:function(){var e=this,t=this.state.addresses;return r.a.createElement(h.a,{fluid:!0},r.a.createElement(p.a,{attached:"top",clearing:!0,secondary:!0},r.a.createElement(g.a,{floated:"left",size:"large"},"FIO Addresses",r.a.createElement(g.a.Subheader,null,"Manage the addresses you control and their associated keys.")),r.a.createElement(O.a,{content:"Refresh Data",floated:"right",icon:"refresh",onClick:this.sync})),!t.length&&r.a.createElement(p.a,{attached:"bottom",size:"large",textAlign:"center"},r.a.createElement(g.a,null,"No addresses associated to this account. Register one to get started.")),!!t.length&&r.a.createElement(v.a,{attached:"bottom",padded:!0,striped:!0},r.a.createElement(v.a.Header,null,r.a.createElement(v.a.Row,null,r.a.createElement(v.a.HeaderCell,null,"Domain Name"),r.a.createElement(v.a.HeaderCell,null,"Addresses"))),r.a.createElement(v.a.Body,null,t.map((function(t){return r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Cell,{collapsing:!0,verticalAlign:"top"},r.a.createElement(g.a,null,t.name),r.a.createElement(v.a,{definition:!0},r.a.createElement(v.a.Body,null,r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Cell,null,"Bundled Txs"),r.a.createElement(v.a.Cell,null,t.bundleeligiblecountdown)),r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Cell,null,"Expires"),r.a.createElement(v.a.Cell,null,new Date(1e3*t.expiration).toUTCString())),r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Cell,null,"Renew"),r.a.createElement(v.a.Cell,null,r.a.createElement(F,{address:t,onSuccess:e.onSuccess,ual:e.props.ual})))))),r.a.createElement(v.a.Cell,{textAlign:"right"},t.addresses.length?r.a.createElement(v.a,{definition:!0},r.a.createElement(v.a.Header,null,r.a.createElement(v.a.Row,null,r.a.createElement(v.a.HeaderCell,null,"Chain"),r.a.createElement(v.a.HeaderCell,null,"Token"),r.a.createElement(v.a.HeaderCell,null,"Address"))),r.a.createElement(v.a.Body,null,t.addresses.map((function(e){return r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Cell,null,e.chain_code),r.a.createElement(v.a.Cell,null,e.token_code),r.a.createElement(v.a.Cell,null,e.public_address))})))):r.a.createElement(p.a,{textAlign:"left"},r.a.createElement(g.a,{size:"small"},"No associated addresses",r.a.createElement(g.a.Subheader,null,"Create a new FIO address for this domain using the button below."))),r.a.createElement(M,{address:t,onSuccess:e.onSuccess,ual:e.props.ual})))})))))}}]),a}(n.Component),P={fio_address:"",owner_fio_public_key:"",max_fee:"",actor:"",tpid:"tpid@greymass"},U=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={account:void 0,balance:void 0,errors:[],fee:void 0,fields:P,show:!1},e.onOpen=function(t,a){e.resetData(),e.getAccount(),e.getBalance(),e.getFee()},e.resetData=function(){return e.setState({account:void 0,balance:void 0,errors:[],fee:void 0,fields:P})},e.getAccount=function(){var t=e.props.ual.activeUser;t.rpc.get_account(t.accountName).then((function(a){e.setState({account:a,fields:Object.assign({},e.state.fields,{actor:t.accountName,owner_fio_public_key:a.permissions.filter((function(e){return"owner"===e.perm_name}))[0].required_auth.keys[0].key})})}))},e.getBalance=function(){var t=e.props.ual.activeUser;t.rpc.get_currency_balance("fio.token",t.accountName,"fio").then((function(t){return e.setState({balance:t})}))},e.getFee=function(){e.props.ual.activeUser.rpc.get_table_rows({code:"fio.fee",table:"fiofees",scope:"fio.fee",key_type:"i128",index_position:2,lower_bound:"0x1a5f09714542254caaab363d520adfbd",upper_bound:"0x1a5f09714542254caaab363d520adfbd",limit:1}).then((function(t){e.setState({fee:t.rows[0],fields:Object.assign({},e.state.fields,{max_fee:t.rows[0].suf_amount})})}))},e.hide=function(){return e.setState({show:!1})},e.show=function(){return e.setState({show:!0})},e.onChange=function(t,a){var n=a.name,r=a.value;return e.setState({fields:Object.assign({},e.state.fields,Object(I.a)({},n,r))})},e.transact=Object(B.a)(w.a.mark((function t(){var a,n,r,o,c;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.fields,n=e.props.ual.activeUser,t.prev=2,r=n.accountName,o=n.requestPermission,c={actions:[{account:"fio.address",name:"regaddress",authorization:[{actor:r,permission:o}],data:a}]},t.next=7,n.signTransaction(c,{expireSeconds:120,blocksBehind:3});case 7:e.props.onSuccess(),e.hide(),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),e.setState({errors:t.t0.cause.json.fields});case 14:case"end":return t.stop()}}),t,null,[[2,11]])}))),e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props.domain,a=this.state,n=a.balance,o=a.errors,c=a.fee,s=a.fields,l=a.show;return r.a.createElement(_.a,{closeIcon:!0,content:r.a.createElement(p.a,{padded:!0,size:"large",style:{marginTop:0}},r.a.createElement(p.a,{color:"blue",secondary:!0},r.a.createElement(v.a,{size:"large"},r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Cell,null,"Current FIO Balance"),r.a.createElement(v.a.Cell,{textAlign:"right"},n?r.a.createElement("strong",null,n[0]):r.a.createElement(y.a,{name:"spinner",loading:!0}))),r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Cell,null,"Address Registration Fee"),r.a.createElement(v.a.Cell,{textAlign:"right"},c?r.a.createElement("strong",null,(c.suf_amount/1e9).toFixed(9)," FIO"):r.a.createElement(y.a,{name:"spinner",loading:!0}))))),r.a.createElement(D.a,{error:o.length,onSubmit:this.transact},Object.keys(s).map((function(t){var a=o.filter((function(e){return e.name===t})),n=Object(T.a)(a,1)[0];return"tpid"!==t&&r.a.createElement(D.a.Field,null,r.a.createElement("label",{style:{textTransform:"capitalize"}},t.replace("_"," ")),r.a.createElement(D.a.Input,{error:!!n&&{content:n.error,pointing:"above"},name:t,onChange:e.onChange,value:s[t]}))})),r.a.createElement(b.a,{error:!0,header:"An error occurred while submitting the transaction",content:"Check the red fields above to correct the problems and try again."}),r.a.createElement(p.a,{basic:!0,clearing:!0},r.a.createElement(O.a,{content:"Register Address",floated:"right",primary:!0})))),header:"Register a FIO Address",open:l,onClose:this.hide,onOpen:this.onOpen,trigger:r.a.createElement(O.a,{basic:!0,content:"New address@".concat(t.name),icon:"plus",onClick:this.show,primary:!0,size:"small"})})}}]),a}(n.Component),k={fio_domain:"",owner_fio_public_key:"",max_fee:"",actor:"",tpid:"tpid@greymass"},H=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={account:void 0,balance:void 0,errors:[],fee:void 0,fields:k,show:!1},e.onOpen=function(t,a){e.resetData(),e.getAccount(),e.getBalance(),e.getFee()},e.resetData=function(){return e.setState({account:void 0,balance:void 0,errors:[],fee:void 0,fields:k})},e.getAccount=function(){var t=e.props.ual.activeUser;t.rpc.get_account(t.accountName).then((function(a){e.setState({account:a,fields:Object.assign({},e.state.fields,{actor:t.accountName,owner_fio_public_key:a.permissions.filter((function(e){return"owner"===e.perm_name}))[0].required_auth.keys[0].key})})}))},e.getBalance=function(){var t=e.props.ual.activeUser;t.rpc.get_currency_balance("fio.token",t.accountName,"fio").then((function(t){return e.setState({balance:t})}))},e.getFee=function(){e.props.ual.activeUser.rpc.get_table_rows({code:"fio.fee",table:"fiofees",scope:"fio.fee",key_type:"i128",index_position:2,lower_bound:"0xe7961b95f481a901b3bfa23b800c8fb3",upper_bound:"0xe7961b95f481a901b3bfa23b800c8fb3",limit:1}).then((function(t){e.setState({fee:t.rows[0],fields:Object.assign({},e.state.fields,{max_fee:t.rows[0].suf_amount})})}))},e.hide=function(){return e.setState({show:!1})},e.show=function(){return e.setState({show:!0})},e.onChange=function(t,a){var n=a.name,r=a.value;return e.setState({fields:Object.assign({},e.state.fields,Object(I.a)({},n,r))})},e.transact=Object(B.a)(w.a.mark((function t(){var a,n,r,o,c;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.fields,n=e.props.ual.activeUser,t.prev=2,r=n.accountName,o=n.requestPermission,c={actions:[{account:"fio.address",name:"regdomain",authorization:[{actor:r,permission:o}],data:a}]},t.next=7,n.signTransaction(c,{expireSeconds:120,blocksBehind:3});case 7:e.props.onSuccess(),e.hide(),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),e.setState({errors:t.t0.cause.json.fields});case 14:case"end":return t.stop()}}),t,null,[[2,11]])}))),e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.balance,n=t.errors,o=t.fee,c=t.fields,s=t.show;return r.a.createElement(_.a,{closeIcon:!0,content:r.a.createElement(p.a,{padded:!0,size:"large",style:{marginTop:0}},r.a.createElement(p.a,{color:"blue",secondary:!0},r.a.createElement(v.a,{size:"large"},r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Cell,null,"Current FIO Balance"),r.a.createElement(v.a.Cell,{textAlign:"right"},a?r.a.createElement("strong",null,a[0]):r.a.createElement(y.a,{name:"spinner",loading:!0}))),r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Cell,null,"Domain Registration Fee"),r.a.createElement(v.a.Cell,{textAlign:"right"},o?r.a.createElement("strong",null,(o.suf_amount/1e9).toFixed(9)," FIO"):r.a.createElement(y.a,{name:"spinner",loading:!0}))))),r.a.createElement(D.a,{error:n.length,onSubmit:this.transact},Object.keys(c).map((function(t){var a=n.filter((function(e){return e.name===t})),o=Object(T.a)(a,1)[0];return"tpid"!==t&&r.a.createElement(D.a.Field,null,r.a.createElement("label",{style:{textTransform:"capitalize"}},t.replace("_"," ")),r.a.createElement(D.a.Input,{error:!!o&&{content:o.error,pointing:"above"},name:t,onChange:e.onChange,value:c[t]}))})),r.a.createElement(b.a,{error:!0,header:"An error occurred while submitting the transaction",content:"Check the red fields above to correct the problems and try again."}),r.a.createElement(p.a,{basic:!0,clearing:!0},r.a.createElement(O.a,{content:"Register Domain",floated:"right",primary:!0})))),header:"Register a FIO Domain",open:s,onClose:this.hide,onOpen:this.onOpen,trigger:r.a.createElement(O.a,{content:"Register Domain",floated:"right",icon:"plus",onClick:this.show,primary:!0})})}}]),a}(n.Component),G={fio_domain:"",max_fee:"",actor:"",tpid:"tpid@greymass"},V=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).onOpen=function(e,t){n.resetData(),n.getAccount(),n.getBalance(),n.getFee()},n.resetData=function(){return n.setState({account:void 0,balance:void 0,errors:[],fee:void 0,fields:Object.assign({},G,{fio_domain:n.props.domain.name})})},n.getAccount=function(){var e=n.props.ual.activeUser;e.rpc.get_account(e.accountName).then((function(t){n.setState({account:t,fields:Object.assign({},n.state.fields,{actor:e.accountName})})}))},n.getBalance=function(){var e=n.props.ual.activeUser;e.rpc.get_currency_balance("fio.token",e.accountName,"fio").then((function(e){return n.setState({balance:e})}))},n.getFee=function(){n.props.ual.activeUser.rpc.get_table_rows({code:"fio.fee",table:"fiofees",scope:"fio.fee",key_type:"i128",index_position:2,lower_bound:"0x4d41a1a623015e4f0eb5492057967e72",upper_bound:"0x4d41a1a623015e4f0eb5492057967e72",limit:1}).then((function(e){n.setState({fee:e.rows[0],fields:Object.assign({},n.state.fields,{max_fee:e.rows[0].suf_amount})})}))},n.hide=function(){return n.setState({show:!1})},n.show=function(){return n.setState({show:!0})},n.onChange=function(e,t){var a=t.name,r=t.value;return n.setState({fields:Object.assign({},n.state.fields,Object(I.a)({},a,r))})},n.transact=Object(B.a)(w.a.mark((function e(){var t,a,r,o,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.fields,a=n.props.ual.activeUser,e.prev=2,r=a.accountName,o=a.requestPermission,c={actions:[{account:"fio.address",name:"renewdomain",authorization:[{actor:r,permission:o}],data:t}]},e.next=7,a.signTransaction(c,{expireSeconds:120,blocksBehind:3});case 7:n.props.onSuccess(),n.hide(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),n.setState({errors:e.t0.cause.json.fields});case 14:case"end":return e.stop()}}),e,null,[[2,11]])}))),n.state={account:void 0,balance:void 0,errors:[],fee:void 0,fields:Object.assign({},G,{fio_domain:n.props.domain.name}),show:!1},console.log(n.props.domain.name),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.balance,n=t.errors,o=t.fee,c=t.fields,s=t.show;return r.a.createElement(_.a,{closeIcon:!0,content:r.a.createElement(p.a,{padded:!0,size:"large",style:{marginTop:0}},r.a.createElement(p.a,{color:"blue",secondary:!0},r.a.createElement(v.a,{size:"large"},r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Cell,null,"Current FIO Balance"),r.a.createElement(v.a.Cell,{textAlign:"right"},a?r.a.createElement("strong",null,a[0]):r.a.createElement(y.a,{name:"spinner",loading:!0}))),r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Cell,null,"Address Registration Fee"),r.a.createElement(v.a.Cell,{textAlign:"right"},o?r.a.createElement("strong",null,(o.suf_amount/1e9).toFixed(9)," FIO"):r.a.createElement(y.a,{name:"spinner",loading:!0}))))),r.a.createElement(D.a,{error:n.length,onSubmit:this.transact},Object.keys(c).map((function(t){var a=n.filter((function(e){return e.name===t})),o=Object(T.a)(a,1)[0];return"tpid"!==t&&r.a.createElement(D.a.Field,null,r.a.createElement("label",{style:{textTransform:"capitalize"}},t.replace("_"," ")),r.a.createElement(D.a.Input,{error:!!o&&{content:o.error,pointing:"above"},name:t,onChange:e.onChange,value:c[t]}))})),r.a.createElement(b.a,{error:!0,header:"An error occurred while submitting the transaction",content:"Check the red fields above to correct the problems and try again."}),r.a.createElement(p.a,{basic:!0,clearing:!0},r.a.createElement(O.a,{content:"Renew Domain",floated:"right",primary:!0})))),header:"Renew FIO Domain",open:s,onClose:this.hide,onOpen:this.onOpen,trigger:r.a.createElement(O.a,{basic:!0,content:"Renew Domain",onClick:this.show,primary:!0,size:"small"})})}}]),a}(n.Component),K=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={addresses:[],domains:[]},e.sync=function(){var t=e.props.ual.activeUser;e.getDomains(t.accountName)},e.onSuccess=function(){e.sync()},e.getDomains=function(t){e.props.ual.activeUser.rpc.get_table_rows({code:"fio.address",table:"domains",scope:"fio.address",key_type:"name",index_position:2,lower_bound:t,upper_bound:t,limit:10}).then((function(t){e.setState({domains:t.rows}),t.rows.length&&t.rows.map(e.getAddresses)}))},e.getAddresses=function(t){e.props.ual.activeUser.rpc.get_table_rows({code:"fio.address",table:"fionames",scope:"fio.address",key_type:"i128",index_position:2,lower_bound:t.domainhash,upper_bound:t.domainhash,limit:10}).then((function(t){e.setState({addresses:Object(N.uniqBy)([].concat(Object(A.a)(e.state.addresses),Object(A.a)(t.rows)),"id")})}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.ual.activeUser&&this.sync()}},{key:"render",value:function(){var e=this,t=this.state,a=t.addresses,n=t.domains;return r.a.createElement(h.a,{fluid:!0},r.a.createElement(p.a,{attached:"top",clearing:!0,secondary:!0},r.a.createElement(g.a,{floated:"left",size:"large"},"FIO Domains",r.a.createElement(g.a.Subheader,null,"Manage the domains you control and address associations.")),r.a.createElement(O.a,{content:"Refresh Data",floated:"right",icon:"refresh",onClick:this.sync}),r.a.createElement(H,{onSuccess:this.onSuccess,ual:this.props.ual})),!n.length&&r.a.createElement(p.a,{attached:"bottom",size:"large",textAlign:"center"},r.a.createElement(g.a,null,"No domains associated to this account. Register one to get started.")),!!n.length&&r.a.createElement(v.a,{attached:"bottom",padded:!0,striped:!0},r.a.createElement(v.a.Header,null,r.a.createElement(v.a.Row,null,r.a.createElement(v.a.HeaderCell,null,"Domain Name"),r.a.createElement(v.a.HeaderCell,null,"Addresses"))),r.a.createElement(v.a.Body,null,n.map((function(t){var n=a.filter((function(e){return e.domain===t.name}));return r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Cell,{collapsing:!0,verticalAlign:"top"},r.a.createElement(g.a,null,"@",t.name),r.a.createElement(v.a,{definition:!0},r.a.createElement(v.a.Body,null,r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Cell,null,"Public"),r.a.createElement(v.a.Cell,null,t.is_public?"True":"False")),r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Cell,null,"Expires"),r.a.createElement(v.a.Cell,null,new Date(1e3*t.expiration).toUTCString())),r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Cell,null,"Renew"),r.a.createElement(v.a.Cell,null,r.a.createElement(V,{domain:t,onSuccess:e.onSuccess,ual:e.props.ual})))))),r.a.createElement(v.a.Cell,{textAlign:"right"},n.length?r.a.createElement(v.a,{definition:!0},r.a.createElement(v.a.Body,null,n.map((function(e){return r.a.createElement(v.a.Row,null,r.a.createElement(v.a.Cell,null,e.name),r.a.createElement(v.a.Cell,null,e.addresses[0].public_address,r.a.createElement("br",null),"Expires: ",new Date(1e3*e.expiration).toLocaleDateString()))})))):r.a.createElement(p.a,{textAlign:"left"},r.a.createElement(g.a,{size:"small"},"No associated addresses",r.a.createElement(g.a.Subheader,null,"Create a new FIO address for this domain using the button below."))),r.a.createElement(U,{domain:t,onSuccess:e.onSuccess,ual:e.props.ual})))})))))}}]),a}(n.Component),z=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.ual,t=e.chains,a=[{menuItem:"Address Management",render:function(){return r.a.createElement(E.a.Pane,null,r.a.createElement(x,{ual:e}))}},{menuItem:"Domain Management",render:function(){return r.a.createElement(E.a.Pane,null,r.a.createElement(K,{ual:e}))}}];return r.a.createElement(h.a,{style:{margin:"3em 0"}},r.a.createElement(C.a,{relaxed:!0},r.a.createElement(C.a.Row,null,r.a.createElement(C.a.Column,{width:10},r.a.createElement(g.a,{size:"large"},"FIO Registration Helper",r.a.createElement(g.a.Subheader,null,"A tool to assist with domain and address registration."))),r.a.createElement(C.a.Column,{width:6,textAlign:"right"},r.a.createElement(S,{ual:e}))),"b20901380af44ef59c5918439a1f9a41d83669020319a80574b804a5f95cbd7e"===t[0].chainId?r.a.createElement(C.a.Row,{columns:1},r.a.createElement(C.a.Column,null,r.a.createElement(b.a,{content:"This app is in testing mode and uses the FIO Testnet (".concat(t[0].chainId,")."),header:"TESTNET Mode",icon:"warning sign",size:"large",warning:!0}))):r.a.createElement(C.a.Row,{columns:1},r.a.createElement(C.a.Column,null,r.a.createElement(b.a,{content:"This app is in BETA and is connected to the FIO Mainnet (".concat(t[0].chainId,")."),header:"FIO Mainnet",icon:"info circle",info:!0,size:"large"}))),r.a.createElement(C.a.Row,{columns:1},r.a.createElement(C.a.Column,null,e.activeUser?r.a.createElement(E.a,{menu:{attached:"top",icon:"home",size:"huge",tabular:!0},panes:a}):r.a.createElement(p.a,{size:"large",stacked:!0,textAlign:"center"},r.a.createElement("p",null,"Login to manage domains and addresses for the FIO blockchain."),r.a.createElement(S,{ual:e}))))))}}]),a}(n.Component),Z={chainId:"21dcae42c0182200e93f954a074011f9048a7624c6fe81d3c9541a614a88bd1c",name:"FIO",rpcEndpoints:[{protocol:"https",host:"fio.greymass.com",port:443}]},Y={chainId:"b20901380af44ef59c5918439a1f9a41d83669020319a80574b804a5f95cbd7e",name:"FIO Testnet",rpcEndpoints:[{protocol:"https",host:"fiotestnet.greymass.com",port:443}]},W=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){console.log(window.location.search);var e=Z;"?testnet"===window.location.search&&(e=Y);var t=new d.Anchor([e],{appName:"fio-register"}),a=new m.Scatter([e],{appName:"fio-register"});return r.a.createElement(f.UALProvider,{appName:"FIO Registration",authenticators:[t,a],chains:[e]},r.a.createElement(Q,null),r.a.createElement(p.a,{basic:!0,textAlign:"center"},"b20901380af44ef59c5918439a1f9a41d83669020319a80574b804a5f95cbd7e"===e.chainId?r.a.createElement("a",{href:"/fio-register"},"Switch to use FIO Mainnet"):r.a.createElement("a",{href:"/fio-register?testnet"},"Switch to use FIO Testnet")))}}]),a}(n.Component),Q=Object(f.withUAL)(z),q=function(){return r.a.createElement(W,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(814);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[409,1,2]]]);
//# sourceMappingURL=main.55711c9d.chunk.js.map