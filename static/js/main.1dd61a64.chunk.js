(this["webpackJsonpfio-register"]=this["webpackJsonpfio-register"]||[]).push([[0],{421:function(e,a,t){e.exports=t(813)},455:function(e,a){},457:function(e,a){},535:function(e,a){},555:function(e,a){},556:function(e,a){},812:function(e,a,t){},813:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),l=t(95),o=t.n(l),c=t(14),i=t(18),s=t(22),u=t(21),d=t(379),m=t(384),f=t(245),p=t(250),E=t(830),g=t(825),h=t(409),b=t(833),C=t(831),O=t(832),v=function(e){Object(u.a)(t,e);var a=Object(s.a)(t);function t(){return Object(c.a)(this,t),a.apply(this,arguments)}return Object(i.a)(t,[{key:"render",value:function(){var e=this.props.ual.activeUser;return e?r.a.createElement(p.a,{secondary:!0,stacked:!0},r.a.createElement(b.a,null,r.a.createElement(b.a.Content,null,r.a.createElement(b.a.Subheader,null,"Current Account"),r.a.createElement("span",null,e.accountName,"@",e.requestPermission)),r.a.createElement(O.a,{basic:!0,onClick:this.props.ual.logout,style:{marginLeft:"1em"}},"Sign out"))):r.a.createElement(O.a,{content:"Sign in",onClick:this.props.ual.showModal,size:"large",primary:!0})}}]),t}(n.Component),S=t(117),A=t(26),_=t(829),w=t(137),F=t(7),I=t.n(F),y=t(10),T=t(30),k=t(827),x=t(118),R=t(826),B={fio_address:"",owner_fio_public_key:"",max_fee:"",actor:"",tpid:"tpid@greymass"},N=function(e){Object(u.a)(t,e);var a=Object(s.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).state={account:void 0,balance:void 0,errors:[],fee:void 0,fields:B,show:!1},e.onOpen=function(a,t){e.resetData(),e.getFIOBalanceAndAccount(),e.getFee()},e.resetData=function(){return e.setState({account:void 0,balance:void 0,errors:[],fee:void 0,fields:B})},e.getFIOBalanceAndAccount=function(){var a=e.props.ual.activeUser,t=void 0;a.rpc.get_account(a.accountName).then((function(n){t=n.permissions.filter((function(e){return"owner"===e.perm_name}))[0].required_auth.keys[0].key,e.setState({account:n,fields:Object.assign({},e.state.fields,{actor:a.accountName,owner_fio_public_key:t})}),a.rpc.fetch("/v1/chain/get_fio_balance",{fio_public_key:t}).then((function(a){return e.setState({balance:a})}))}))},e.getFee=function(){e.props.ual.activeUser.rpc.get_table_rows({code:"fio.fee",table:"fiofees",scope:"fio.fee",key_type:"i128",index_position:2,lower_bound:"0x1a5f09714542254caaab363d520adfbd",upper_bound:"0x1a5f09714542254caaab363d520adfbd",limit:1}).then((function(a){e.setState({fee:a.rows[0],fields:Object.assign({},e.state.fields,{max_fee:a.rows[0].suf_amount})})}))},e.hide=function(){return e.setState({show:!1})},e.show=function(){return e.setState({show:!0})},e.onChange=function(a,t){var n=t.name,r=t.value;return e.setState({fields:Object.assign({},e.state.fields,Object(T.a)({},n,r))})},e.transact=Object(y.a)(I.a.mark((function a(){var t,n,r,l,o;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.state.fields,n=e.props.ual.activeUser,a.prev=2,r=n.accountName,l=n.requestPermission,o={actions:[{account:"fio.address",name:"regaddress",authorization:[{actor:r,permission:l}],data:t}]},a.next=7,n.signTransaction(o,{expireSeconds:120,blocksBehind:3});case 7:e.props.onSuccess(),e.hide(),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(2),e.setState({errors:a.t0.cause.json.fields});case 14:case"end":return a.stop()}}),a,null,[[2,11]])}))),e}return Object(i.a)(t,[{key:"render",value:function(){var e=this,a=this.props,t=a.basic,n=a.color,l=a.domain,o=a.floated,c=this.state,i=c.balance,s=c.errors,u=c.fee,d=c.fields,m=c.show,f="Create FIO Crypto Handle";return l&&(f="Create FIO Crypto Handle (address@".concat(l.name,")")),r.a.createElement(k.a,{closeIcon:!0,content:r.a.createElement(p.a,{padded:!0,size:"large",style:{marginTop:0}},r.a.createElement(p.a,{color:"blue",secondary:!0},r.a.createElement(_.a,{size:"large"},r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"FIO Staked"),r.a.createElement(_.a.Cell,{textAlign:"right"},i?r.a.createElement("strong",null,(i.staked/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"FIO Being Refunded"),r.a.createElement(_.a.Cell,{textAlign:"right"},i?r.a.createElement("strong",null,((i.balance-i.available-i.staked)/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"FIO Available"),r.a.createElement(_.a.Cell,{textAlign:"right"},i?r.a.createElement("strong",null,(i.available/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"Current FIO Balance"),r.a.createElement(_.a.Cell,{textAlign:"right"},i?r.a.createElement("strong",null,(i.balance/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"Crypto Handle Registration Fee"),r.a.createElement(_.a.Cell,{textAlign:"right"},u?r.a.createElement("strong",null,(u.suf_amount/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))))),r.a.createElement(R.a,{error:s.length,onSubmit:this.transact},Object.keys(d).map((function(a){var t=s.filter((function(e){return e.name===a})),n=Object(A.a)(t,1)[0];return"tpid"!==a&&r.a.createElement(R.a.Field,null,"fio_address"===a&&r.a.createElement(C.a,{info:!0,header:"FIO Crypto Handles",content:'Enter the desired FIO Crypto Handle including both the name and the domain, separated by the @ symbol (e.g. "name@'.concat(l?l.name:"domain",'").')}),r.a.createElement("label",{style:{textTransform:"capitalize"}},a.replace("fio_address","crypto_handle").replace(/_/g," ")),r.a.createElement(R.a.Input,{error:!!n&&{content:n.error,pointing:"above"},name:a,onChange:e.onChange,value:d[a]}))})),r.a.createElement(C.a,{error:!0,header:"An error occurred while submitting the transaction",content:"Check the red fields above to correct the problems and try again."}),r.a.createElement(p.a,{basic:!0,clearing:!0},r.a.createElement(O.a,{content:"Register Crypto Handle",floated:"right",primary:!0})))),header:"Register a FIO Crypto Handle",open:m,onClose:this.hide,onOpen:this.onOpen,trigger:r.a.createElement(O.a,{basic:void 0===t||t,color:n,content:f,floated:o,icon:"plus",onClick:this.show,primary:!0})})}}]),t}(n.Component),j=["BTC","ETH","EOS","$DAG","8BIT","ABA","ABBC","ABT","AC","ACA","ACC","ACM","ACT","ADA","ADF","ADS","AE","AEON","AERGO","AETH","AG","AGM","AIB","AILE","AIN","AION","AIOZ","AKA","ALGO","ALIAS","AMA","AMO","AMS","ANDES","ANK","ANON","AOA","AQUA","AR","ARA","ARDR","AREPA","ARG","ARK","ARW","ASF","ASK","ATC","ATH","ATN","ATOM","ATP","ATS","AUDAX","AUR","AUX","AXE","AYA","BALLZ","BANANO","BAND","BARE","BBC","BC","BCA","BCC","BCD","BCH","BCHA","BCN","BCO","BCS","BCX","BCZ","BDX","BEAM","BEET","BELA","BELL","BHD","BHP","BHT","BIFI","BIGUP","BIND","BIO","BIP","BIQ","BIS","BITB","BITC","BITG","BKT","BLAST","BLK","BLOCK","BMV","BNB","BND","BNT","BOLD","BOLI","BONO","BOPO","BOXY","BPA","BPS","BR","BRAVO","BRIT","BRK","BSC","BSD","BSQ","BST","BSV","BTA","BTC2","BTC2X","BTCC","BTCD","BTCP","BTCR","BTCS","BTCV","BTCZ","BTDX","BTF","BTG","BTH","BTM","BTN","BTP","BTQ","BTR","BTS","BTT","BTV","BTW","BTX","BTY","BU","BURST","BUZZ","BYND","BYTZ","BZX","CCA","CCC","CCN","CCX","CCXX","CDN","CDY","CENNZ","CET","CFX","cGLD","CHC","CHI","CHX","CICO","CITY","CKB","CLAM","CLC","CLO","CLR","CLUB","CLX","CMM","CMP","CMT","CNMC","COCOS","COIN","COINEVO","COLX","COS","CPC","CPS","CPU","CRAVE","CRO","CRP","CRUZ","CRW","CRX","CS","CSC","CSDT","CTC","CYB","CZR","DAPS","DASH","DBIC","DBT","DCR","DCT","DEAL","DEO","DFC","DGB","DGC","DGLD","DIN","DIP","DIVER","DIVI","DLC","DMCH","DMD","DMTC","DNA","DNR","DOCK","DOGE","DOGEC","DONU","DOPE","DOT","DROP","DSM","DST","DT3","DTP","DUN","DVT","DX","DXN","DYN","EARTH","EARTHS","EAST","EBST","EC","ECA","ECC","ECN","EDG","EDRC","EFL","EGEM","ELA","ELF","ELLA","EM","EMC2","EOSC","ERC","ERD","ERE","ERG","ESN","ESS","ETC","ETF","ETHO","ETI","ETN","ETP","ETSC","ETZ","EUNO","EVE","EVO","EVT","EWT","EXCL","EXOS","EXP","FAIR","FC8","FCH","FCT","FCTID","FIAT","FIC","FIL","FIMK","FIN","FIO","FIS","FIX","FJC","FLASH","FLO","FLOW","FLR","FLUID","FO","FRA","FREE","FRST","FSN","FTC","FXTC","GALI","GAME","GARD","GB","GBCR","GBT","GBX","GC","GCR","GENOM","GFN","GHOST","GIN","GLEEC","GNX","GO","GOD","GOSS","GRAM","GRC","GRIN","GRS","GTM","GXC","GXX","HASH","HATCH","HBC","HC","HDD","HEAT","HET","HLM","HNC","HNS","HODL","HPB","HSN","HSR","HST","HTDF","HTH","HTML","HTR","HUSH","HYC","HYD","HYN","ICL","ICU","ICX","IDNA","IF","ILT","IMG","INSN","IOC","ION","IOP","IOST","IOTA","IoTE","IOTX","IOV","IPC","IPOS","IQS","IRIS","IXC","JBS","JCT","JOYS","KAL","KAR","KAVA","KELP","KETH","KEX","KIN","KMD","KOBO","KOTO","KPG","KPL","KSM","KTS","KTV","KUMA","kUSD","KUVA","LAMB","LAT","LAX","LBC","LBTC","LCC","LCH","LDCN","LET","LFC","LHD","LINDA","LINX","LKR","LMO","LN","LOKI","LRG","LSK","LTC","LTHN","LTO","LTP","LTZ","LUNA","LUX","LV","LYRA","MAN","MARS","MASS","MBRS","MCASH","MCM","MDM","MEC","MED","MEM","MESG","META","MHC","MIX","MKF","MNP","MNX","MOAC","MOIN","MONA","MONK","MOON","MSR","MTNS","MTR","MUE","MUSIC","MWC","MXT","MXW","MZC","N8V","NANO","NAS","NAV","NBT","NCG","NCH","NEAR","NEBL","NEET","NEO","NEOS","NIM","NIX","NKN","NLC2","NLG","NMC","NODE","NOLLAR","NOR","NOS","NOVO","NPW","NRG","NRO","NSR","NTY","NUKO","NULS","NVC","NXS","NXT","NYC","NYZO","OBSR","OCEAN","ODN","ODX","OGC","OGO","OK","OKP","OKT","OLO","OLT","OMNI","ONE","ONION","ONT","ONX","OOT","OTC","PART","PCN","PCX","PESO","PEXA","PHL","PHR","PINK","PION","PIRL","PIVX","PKB","PKC","PKT","PLC","PLUG","PND","POA","POLIS","POLYX","POT","PPC","PRCY","PRJ","PRKL","PRV","PSB","PTC","PTN","PUT","PWR","QBC","QKC","QLC","QOS","QRK","QRL","QTUM","QVT","RAP","RBTC","RBY","RDD","REOSC","RES","RIC","RICHX","RIL","RIN","RISE","RITO","RNG","RNL","ROGER","ROI","ROSE","RPD","RPT","RUNE","RUPX","RUTA","RVN","RYO","SAFE","SBC","SBTC","SCAP","SCC","SCDO","SCRIBE","SCRT","SDC","SDGO","SEELE","SEELEN","SEM","SEOS","SEQ","SERO","SFRX","SH","SHARD","SHIT","SHM","SHN","SHR","SIERRA","SIN","SKY","SLP","SLR","SLS","SLU","SLX","SMART","SMESH","SMLY","SNOW","SOL","SOOM","SOV","SOX","SPL","SRM","SSC","SSN","SSP","STAK","START","STASH","STB","STEEM","STO","STR","STRAT","STX","SUGAR","SUM","SUMO","SWIFT","SWTC","SYS","TAN","TAO","TEA","TELOS","TEO","TES","TFUEL","THC","THETA","THT","TKEY","TNET","TOA","TOMO","TON","TOP","TPAY","TPC","TRC","TRTL","TRUE","TRX","TT","TWINS","TZC","UBQ","UC","UFO","UGAS","ULC","UMBRU","UND","UNIFY","UNO","USC","USDP","USE","UTE","VAL","VAR","VASH","VC","VCT","VDL","VEE","VEIL","VEO","VESTX","VET","VGO","VIA","VIPS","VITAE","VITE","VIVO","VIVT","VLX","VNSC","Voken","VOX","VSYS","VTC","WAN","WAVES","WBTC","WC","WE","WEB","WGR","WHL","WICC","WOW","X42","XAS","XAX","XAZAB","XBC","XBI","XCH","XCP","XCX","XDAG","XDAI","XDC","XDN","XEM","XEP","XERO","XFE","XHB","XHV","XLM","XLR","XMCC","XMR","XMX","XMY","XND","XNOS","XNS","XPC","XPM","XRD","XRP","XRPHD","XSEL","XSG","XSN","XSPEC","XST","XTH","XTL","XTNC","XTX","XTZ","XUEZ","XVG","XWC","XWCC","XYM","XZC","YAP","YCC","YCE","YEC","YEE","YOU","ZBC","ZBUX","ZCL","ZCR","ZEC","ZEL","ZEN","ZER","ZEST","ZIL","ZILLA","ZNY","ZNZ","ZOC","ZOOM","ZPM","ZRC","ZSLP","ZVC","ZY","ZYD"],D={fio_address:"",public_addresses:[],max_fee:"",actor:"",tpid:"tpid@greymass"},L=function(e){Object(u.a)(t,e);var a=Object(s.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).onOpen=function(e,a){n.resetData(),n.getFIOBalanceAndAccount(),n.getFee()},n.resetData=function(){return n.setState({account:void 0,balance:void 0,errors:[],fee:void 0,fields:Object.assign({},D,{fio_address:n.props.address.name})})},n.getFIOBalanceAndAccount=function(){var e=n.props.ual.activeUser,a=void 0;e.rpc.get_account(e.accountName).then((function(t){a=t.permissions.filter((function(e){return"owner"===e.perm_name}))[0].required_auth.keys[0].key,n.setState({account:t,fields:Object.assign({},n.state.fields,{actor:e.accountName,owner_fio_public_key:a})}),e.rpc.fetch("/v1/chain/get_fio_balance",{fio_public_key:a}).then((function(e){return n.setState({balance:e})}))}))},n.getFee=function(){n.props.ual.activeUser.rpc.get_table_rows({code:"fio.fee",table:"fiofees",scope:"fio.fee",key_type:"i128",index_position:2,lower_bound:"0x1769ecaf35c00341b5a2e1760114648e",upper_bound:"0x1769ecaf35c00341b5a2e1760114648e",limit:1}).then((function(e){n.setState({fee:e.rows[0],fields:Object.assign({},n.state.fields,{max_fee:e.rows[0].suf_amount})})}))},n.hide=function(){return n.setState({show:!1})},n.show=function(){return n.setState({show:!0})},n.onChange=function(e,a){var t=a.name,r=a.value;return n.setState({fields:Object.assign({},n.state.fields,Object(T.a)({},t,r))})},n.onChangeAddress=function(e,a){var t=a.name,r=a.value;console.log(t,r),n.setState({fields:Object.assign({},n.state.fields,{public_addresses:[Object.assign({},n.state.fields.public_addresses[0],Object(T.a)({},t,r))]})})},n.transact=Object(y.a)(I.a.mark((function e(){var a,t,r,l,o;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.state.fields,t=n.props.ual.activeUser,e.prev=2,r=t.accountName,l=t.requestPermission,o={actions:[{account:"fio.address",name:"addaddress",authorization:[{actor:r,permission:l}],data:a}]},e.next=7,t.signTransaction(o,{expireSeconds:120,blocksBehind:3});case 7:n.props.onSuccess(),n.hide(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0),n.setState({errors:e.t0.cause.json.fields});case 15:case"end":return e.stop()}}),e,null,[[2,11]])}))),n.symbols=j.map((function(e){return{key:e,text:e,value:e}})),n.state={account:void 0,balance:void 0,errors:[],fee:void 0,fields:Object.assign({},D,{fio_address:n.props.address.name}),show:!1},n}return Object(i.a)(t,[{key:"render",value:function(){var e=this,a=this.state,t=a.balance,n=a.errors,l=a.fee,o=a.fields,c=a.show;return r.a.createElement(k.a,{closeIcon:!0,content:r.a.createElement(p.a,{padded:!0,size:"large",style:{marginTop:0}},r.a.createElement(p.a,{color:"blue",secondary:!0},r.a.createElement(_.a,{size:"large"},r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"FIO Staked"),r.a.createElement(_.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,(t.staked/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"FIO Being Refunded"),r.a.createElement(_.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,((t.balance-t.available-t.staked)/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"FIO Available"),r.a.createElement(_.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,(t.available/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"Current FIO Balance"),r.a.createElement(_.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,(t.balance/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"Add Address Association Fee"),r.a.createElement(_.a.Cell,{textAlign:"right"},l?r.a.createElement("strong",null,(l.suf_amount/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))))),r.a.createElement(R.a,{error:n.length,onSubmit:this.transact},Object.keys(o).map((function(a){var t=n.filter((function(e){return e.name===a})),l=Object(A.a)(t,1)[0];return"tpid"!==a&&("public_addresses"===a?r.a.createElement(R.a.Field,null,r.a.createElement("label",null,"Chain Code"),r.a.createElement(R.a.Dropdown,{autoFocus:!0,onChange:e.onChangeAddress,options:e.symbols,name:"chain_code",search:!0,selection:!0}),r.a.createElement("label",null,"Token Symbol"),r.a.createElement(R.a.Input,{name:"token_code",onChange:e.onChangeAddress,search:!0,selection:!0}),r.a.createElement("label",null,"Public Address"),r.a.createElement(R.a.Input,{name:"public_address",onChange:e.onChangeAddress,search:!0,selection:!0})):r.a.createElement(R.a.Field,null,r.a.createElement("label",{style:{textTransform:"capitalize"}},a.replace("fio_address","crypto_handle").replace(/_/g," ")),r.a.createElement(R.a.Input,{error:!!l&&{content:l.error,pointing:"above"},name:a,onChange:e.onChange,value:o[a]})))})),r.a.createElement(C.a,{error:!0,header:"An error occurred while submitting the transaction",content:"Check the red fields above to correct the problems and try again."}),r.a.createElement(p.a,{basic:!0,clearing:!0},r.a.createElement(O.a,{content:"Add Address Association",floated:"right",primary:!0})))),header:"Associate an address",open:c,onClose:this.hide,onOpen:this.onOpen,trigger:r.a.createElement(O.a,{basic:!0,content:"Add Address Association",icon:"plus",onClick:this.show,primary:!0,size:"small"})})}}]),t}(n.Component),M={fio_address:"",bundle_sets:1,max_fee:"",actor:"",tpid:"tpid@greymass"},P=function(e){Object(u.a)(t,e);var a=Object(s.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).onOpen=function(e,a){n.resetData(),n.getFIOBalanceAndAccount(),n.getFee()},n.resetData=function(){return n.setState({account:void 0,balance:void 0,errors:[],fee:void 0,fields:Object.assign({},M,{fio_address:n.props.address.name})})},n.getFIOBalanceAndAccount=function(){var e=n.props.ual.activeUser,a=void 0;e.rpc.get_account(e.accountName).then((function(t){a=t.permissions.filter((function(e){return"owner"===e.perm_name}))[0].required_auth.keys[0].key,n.setState({account:t,fields:Object.assign({},n.state.fields,{actor:e.accountName,owner_fio_public_key:a})}),e.rpc.fetch("/v1/chain/get_fio_balance",{fio_public_key:a}).then((function(e){return n.setState({balance:e})}))}))},n.getFee=function(){n.props.ual.activeUser.rpc.get_table_rows({code:"fio.fee",table:"fiofees",scope:"fio.fee",key_type:"i128",index_position:2,lower_bound:"0x36c1fc97677650c9ecb93f6943f24259",upper_bound:"0x36c1fc97677650c9ecb93f6943f24259",limit:1}).then((function(e){n.setState({fee:e.rows[0],fields:Object.assign({},n.state.fields,{max_fee:e.rows[0].suf_amount})})}))},n.hide=function(){return n.setState({show:!1})},n.show=function(){return n.setState({show:!0})},n.onChange=function(e,a){var t=a.name,r=a.value;return n.setState({fields:Object.assign({},n.state.fields,Object(T.a)({},t,r))})},n.transact=Object(y.a)(I.a.mark((function e(){var a,t,r,l,o;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.state.fields,t=n.props.ual.activeUser,e.prev=2,r=t.accountName,l=t.requestPermission,o={actions:[{account:"fio.address",name:"addbundles",authorization:[{actor:r,permission:l}],data:a}]},e.next=7,t.signTransaction(o,{expireSeconds:120,blocksBehind:3});case 7:n.props.onSuccess(),n.hide(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),n.setState({errors:e.t0.cause.json.fields});case 14:case"end":return e.stop()}}),e,null,[[2,11]])}))),n.state={account:void 0,balance:void 0,errors:[],fee:void 0,fields:Object.assign({},M,{fio_address:n.props.address.name}),show:!1},n}return Object(i.a)(t,[{key:"render",value:function(){var e=this,a=this.state,t=a.balance,n=a.errors,l=a.fee,o=a.fields,c=a.show;return r.a.createElement(k.a,{closeIcon:!0,content:r.a.createElement(p.a,{padded:!0,size:"large",style:{marginTop:0}},r.a.createElement(p.a,{color:"blue",secondary:!0},r.a.createElement(_.a,{size:"large"},r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"FIO Staked"),r.a.createElement(_.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,(t.staked/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"FIO Being Refunded"),r.a.createElement(_.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,((t.balance-t.available-t.staked)/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"FIO Available"),r.a.createElement(_.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,(t.available/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"Current FIO Balance"),r.a.createElement(_.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,(t.balance/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"Fee Per 100 Bundled Transactions"),r.a.createElement(_.a.Cell,{textAlign:"right"},l?r.a.createElement("strong",null,(l.suf_amount/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))))),r.a.createElement(R.a,{error:n.length,onSubmit:this.transact},Object.keys(o).map((function(a){var t=n.filter((function(e){return e.name===a})),l=Object(A.a)(t,1)[0];return"tpid"!==a&&r.a.createElement(R.a.Field,null,r.a.createElement("label",{style:{textTransform:"capitalize"}},a.replace("fio_address","crypto_handle").replace(/_/g," ")),r.a.createElement(R.a.Input,{error:!!l&&{content:l.error,pointing:"above"},name:a,onChange:e.onChange,value:o[a]}))})),r.a.createElement(C.a,{error:!0,header:"An error occurred while submitting the transaction",content:"Check the red fields above to correct the problems and try again."}),r.a.createElement(p.a,{basic:!0,clearing:!0},r.a.createElement(O.a,{content:"Add Bundles",floated:"right",primary:!0})))),header:"Add Bundles",open:c,onClose:this.hide,onOpen:this.onOpen,trigger:r.a.createElement(O.a,{basic:!0,content:"Add Bundles",onClick:this.show,primary:!0,size:"small"})})}}]),t}(n.Component),X={disabled:!1,fio_address:"",new_owner_fio_public_key:"",max_fee:"",actor:"",tpid:"tpid@greymass"},U=function(e){Object(u.a)(t,e);var a=Object(s.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).state={account:void 0,balance:void 0,disabled:!1,errors:[],fee:void 0,fields:X,show:!1},e.onOpen=function(a,t){e.resetData(),e.getFIOBalanceAndAccount(),e.getFee()},e.resetData=function(){return e.setState({account:void 0,balance:void 0,errors:[],fee:void 0,fields:Object.assign({},X,{fio_address:e.props.address.name})})},e.getFIOBalanceAndAccount=function(){var a=e.props.ual.activeUser,t=void 0;a.rpc.get_account(a.accountName).then((function(n){t=n.permissions.filter((function(e){return"owner"===e.perm_name}))[0].required_auth.keys[0].key,e.setState({account:n,fields:Object.assign({},e.state.fields,{actor:a.accountName,owner_fio_public_key:t})}),a.rpc.fetch("/v1/chain/get_fio_balance",{fio_public_key:t}).then((function(a){return e.setState({balance:a})}))}))},e.getFee=function(){e.props.ual.activeUser.rpc.get_table_rows({code:"fio.fee",table:"fiofees",scope:"fio.fee",key_type:"i128",index_position:2,lower_bound:"0x1a01296e38e9dcd89d5f3228db99cc26",upper_bound:"0x1a01296e38e9dcd89d5f3228db99cc26",limit:1}).then((function(a){a.rows.length?e.setState({disabled:!1,fee:a.rows[0],fields:Object.assign({},e.state.fields,{max_fee:a.rows[0].suf_amount})}):e.setState({disabled:!0})}))},e.hide=function(){return e.setState({show:!1})},e.show=function(){return e.setState({show:!0})},e.onChange=function(a,t){var n=t.name,r=t.value;return e.setState({fields:Object.assign({},e.state.fields,Object(T.a)({},n,r))})},e.transact=Object(y.a)(I.a.mark((function a(){var t,n,r,l,o;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.state.fields,n=e.props.ual.activeUser,a.prev=2,r=n.accountName,l=n.requestPermission,o={actions:[{account:"fio.address",name:"xferaddress",authorization:[{actor:r,permission:l}],data:t}]},a.next=7,n.signTransaction(o,{expireSeconds:120,blocksBehind:3});case 7:e.props.onSuccess(),e.hide(),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(2),console.log(a.t0),e.setState({errors:a.t0.cause.json.fields});case 15:case"end":return a.stop()}}),a,null,[[2,11]])}))),e}return Object(i.a)(t,[{key:"render",value:function(){var e=this,a=this.state,t=a.balance,n=a.disabled,l=a.errors,o=a.fee,c=a.fields,i=a.show;return n?r.a.createElement(k.a,{closeIcon:!0,content:r.a.createElement(p.a,{padded:!0,size:"large",style:{marginTop:0}},"Feature not yet available."),header:"Transfer a FIO Address",open:i,onClose:this.hide,onOpen:this.onOpen,trigger:r.a.createElement(O.a,{basic:!0,content:"Transfer Address",onClick:this.show,primary:!0,size:"small"})}):r.a.createElement(k.a,{closeIcon:!0,content:r.a.createElement(p.a,{padded:!0,size:"large",style:{marginTop:0}},r.a.createElement(p.a,{color:"blue",secondary:!0},r.a.createElement(_.a,{size:"large"},r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"FIO Staked"),r.a.createElement(_.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,(t.staked/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"FIO Being Refunded"),r.a.createElement(_.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,((t.balance-t.available-t.staked)/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"FIO Available"),r.a.createElement(_.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,(t.available/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"Current FIO Balance"),r.a.createElement(_.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,(t.balance/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"Address Transfer Fee"),r.a.createElement(_.a.Cell,{textAlign:"right"},o?r.a.createElement("strong",null,(o.suf_amount/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))))),r.a.createElement(R.a,{error:l.length,onSubmit:this.transact},Object.keys(c).filter((function(e){return"disabled"!==e})).map((function(a){var t=l.filter((function(e){return e.name===a})),n=Object(A.a)(t,1)[0];return"tpid"!==a&&r.a.createElement(R.a.Field,null,r.a.createElement("label",{style:{textTransform:"capitalize"}},a.replace("fio_address","crypto_handle").replace(/_/g," ")),r.a.createElement(R.a.Input,{error:!!n&&{content:n.error,pointing:"above"},name:a,onChange:e.onChange,value:c[a]}))})),r.a.createElement(C.a,{error:!0,header:"An error occurred while submitting the transaction",content:"Check the red fields above to correct the problems and try again."}),r.a.createElement(p.a,{basic:!0,clearing:!0},r.a.createElement(O.a,{content:"Transfer Crypto Handle",floated:"right",primary:!0})))),header:"Transfer a FIO Crypto Handle",open:i,onClose:this.hide,onOpen:this.onOpen,trigger:r.a.createElement(O.a,{basic:!0,content:"Transfer Crypto Handle",onClick:this.show,primary:!0,size:"small"})})}}]),t}(n.Component),H=function(e){Object(u.a)(t,e);var a=Object(s.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).state={addresses:[],owner_fio_public_key:""},e.sync=function(){var a=e.props.ual.activeUser;e.getAddresses(a.accountName)},e.onSuccess=function(){e.sync()},e.getAddresses=function(a){var t=e.props.ual.activeUser.rpc;t.get_table_rows({code:"fio.address",table:"fionames",scope:"fio.address",key_type:"name",index_position:4,lower_bound:a,upper_bound:a,limit:10}).then((function(n){var r={owner_account:a},l=Object(w.partition)(e.state.addresses,r),o=Object(A.a)(l,2)[1];t.get_account(a).then((function(a){e.setState({addresses:[].concat(Object(S.a)(o),Object(S.a)(n.rows)),owner_fio_public_key:a.permissions.filter((function(e){return"owner"===e.perm_name}))[0].required_auth.keys[0].key})}))}))},e}return Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.ual.activeUser&&this.sync()}},{key:"render",value:function(){var e=this,a=this.state.addresses;return r.a.createElement(g.a,{fluid:!0},r.a.createElement(p.a,{attached:"top",clearing:!0,secondary:!0},r.a.createElement(b.a,{floated:"left",size:"large"},"Crypto Handles",r.a.createElement(b.a.Subheader,null,"Manage the crypto handles you control and their associated keys.")),r.a.createElement(O.a,{content:"Refresh Data",floated:"right",icon:"refresh",onClick:this.sync}),r.a.createElement(N,{basic:!1,color:"blue",floated:"right",onSuccess:this.onSuccess,ual:this.props.ual}),r.a.createElement("a",{class:"ui blue right floated button",href:"https://reg.fioprotocol.io/address/fioreghelper?publicKey="+this.state.owner_fio_public_key},r.a.createElement("i",{"aria-hidden":"true",class:"dollar icon"}),"Buy FIO Crypto Handle")),!a.length&&r.a.createElement(p.a,{attached:"bottom",size:"large",textAlign:"center"},r.a.createElement(b.a,null,"No crypto handles associated to this account. Register one to get started.")),!!a.length&&r.a.createElement(_.a,{attached:"bottom",padded:!0,striped:!0},r.a.createElement(_.a.Header,null,r.a.createElement(_.a.Row,null,r.a.createElement(_.a.HeaderCell,null,"Domain Name"),r.a.createElement(_.a.HeaderCell,null,"Crypto Handles"))),r.a.createElement(_.a.Body,null,a.map((function(a){return r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,{collapsing:!0,verticalAlign:"top"},r.a.createElement(b.a,null,a.name),r.a.createElement(_.a,{definition:!0},r.a.createElement(_.a.Body,null,r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"Bundled Txs"),r.a.createElement(_.a.Cell,null,a.bundleeligiblecountdown)),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"Add Bundles"),r.a.createElement(_.a.Cell,null,r.a.createElement(P,{address:a,onSuccess:e.onSuccess,ual:e.props.ual}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"Transfer"),r.a.createElement(_.a.Cell,null,r.a.createElement(U,{address:a,onSuccess:e.onSuccess,ual:e.props.ual})))))),r.a.createElement(_.a.Cell,{textAlign:"right"},a.addresses.length?r.a.createElement(_.a,{definition:!0},r.a.createElement(_.a.Header,null,r.a.createElement(_.a.Row,null,r.a.createElement(_.a.HeaderCell,null,"Chain"),r.a.createElement(_.a.HeaderCell,null,"Token"),r.a.createElement(_.a.HeaderCell,null,"Address"))),r.a.createElement(_.a.Body,null,a.addresses.map((function(e){return r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,e.chain_code),r.a.createElement(_.a.Cell,null,e.token_code),r.a.createElement(_.a.Cell,null,e.public_address))})))):r.a.createElement(p.a,{textAlign:"left"},r.a.createElement(b.a,{size:"small"},"No associated crypto handle",r.a.createElement(b.a.Subheader,null,"Create a new FIO Crypto Handle for this domain using the button below."))),r.a.createElement(L,{address:a,onSuccess:e.onSuccess,ual:e.props.ual})))})))))}}]),t}(n.Component),z={fio_domain:"",owner_fio_public_key:"",max_fee:"",actor:"",tpid:"tpid@greymass"},G=function(e){Object(u.a)(t,e);var a=Object(s.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).state={account:void 0,balance:void 0,errors:[],fee:void 0,fields:z,show:!1},e.onOpen=function(a,t){e.resetData(),e.getFIOBalanceAndAccount(),e.getFee()},e.resetData=function(){return e.setState({account:void 0,balance:void 0,errors:[],fee:void 0,fields:z})},e.getFIOBalanceAndAccount=function(){var a=e.props.ual.activeUser,t=void 0;a.rpc.get_account(a.accountName).then((function(n){t=n.permissions.filter((function(e){return"owner"===e.perm_name}))[0].required_auth.keys[0].key,e.setState({account:n,fields:Object.assign({},e.state.fields,{actor:a.accountName,owner_fio_public_key:t})}),a.rpc.fetch("/v1/chain/get_fio_balance",{fio_public_key:t}).then((function(a){return e.setState({balance:a})}))}))},e.getFee=function(){e.props.ual.activeUser.rpc.get_table_rows({code:"fio.fee",table:"fiofees",scope:"fio.fee",key_type:"i128",index_position:2,lower_bound:"0xe7961b95f481a901b3bfa23b800c8fb3",upper_bound:"0xe7961b95f481a901b3bfa23b800c8fb3",limit:1}).then((function(a){e.setState({fee:a.rows[0],fields:Object.assign({},e.state.fields,{max_fee:a.rows[0].suf_amount})})}))},e.hide=function(){return e.setState({show:!1})},e.show=function(){return e.setState({show:!0})},e.onChange=function(a,t){var n=t.name,r=t.value;return e.setState({fields:Object.assign({},e.state.fields,Object(T.a)({},n,r))})},e.transact=Object(y.a)(I.a.mark((function a(){var t,n,r,l,o;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.state.fields,n=e.props.ual.activeUser,a.prev=2,r=n.accountName,l=n.requestPermission,o={actions:[{account:"fio.address",name:"regdomain",authorization:[{actor:r,permission:l}],data:t}]},a.next=7,n.signTransaction(o,{expireSeconds:120,blocksBehind:3});case 7:e.props.onSuccess(),e.hide(),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(2),e.setState({errors:a.t0.cause.json.fields});case 14:case"end":return a.stop()}}),a,null,[[2,11]])}))),e}return Object(i.a)(t,[{key:"render",value:function(){var e=this,a=this.state,t=a.balance,n=a.errors,l=a.fee,o=a.fields,c=a.show;return r.a.createElement(k.a,{closeIcon:!0,content:r.a.createElement(p.a,{padded:!0,size:"large",style:{marginTop:0}},r.a.createElement(p.a,{color:"blue",secondary:!0},r.a.createElement(_.a,{size:"large"},r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"FIO Staked"),r.a.createElement(_.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,(t.staked/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"FIO Being Refunded"),r.a.createElement(_.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,((t.balance-t.available-t.staked)/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"FIO Available"),r.a.createElement(_.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,(t.available/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"Current FIO Balance"),r.a.createElement(_.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,(t.balance/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"Domain Registration Fee"),r.a.createElement(_.a.Cell,{textAlign:"right"},l?r.a.createElement("strong",null,(l.suf_amount/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))))),r.a.createElement(R.a,{error:n.length,onSubmit:this.transact},Object.keys(o).map((function(a){var t=n.filter((function(e){return e.name===a})),l=Object(A.a)(t,1)[0];return"tpid"!==a&&r.a.createElement(R.a.Field,null,r.a.createElement("label",{style:{textTransform:"capitalize"}},a.replace(/_/g," ")),r.a.createElement(R.a.Input,{error:!!l&&{content:l.error,pointing:"above"},name:a,onChange:e.onChange,value:o[a]}))})),r.a.createElement(C.a,{error:!0,header:"An error occurred while submitting the transaction",content:"Check the red fields above to correct the problems and try again."}),r.a.createElement(p.a,{basic:!0,clearing:!0},r.a.createElement(O.a,{content:"Register Domain",floated:"right",primary:!0})))),header:"Register a FIO Domain",open:c,onClose:this.hide,onOpen:this.onOpen,trigger:r.a.createElement(O.a,{content:"Register Domain",floated:"right",icon:"plus",onClick:this.show,primary:!0})})}}]),t}(n.Component),V={fio_domain:"",max_fee:"",actor:"",tpid:"tpid@greymass"},K=function(e){Object(u.a)(t,e);var a=Object(s.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).onOpen=function(e,a){n.resetData(),n.getFIOBalanceAndAccount(),n.getFee()},n.resetData=function(){return n.setState({account:void 0,balance:void 0,errors:[],fee:void 0,fields:Object.assign({},V,{fio_domain:n.props.domain.name})})},n.getFIOBalanceAndAccount=function(){var e=n.props.ual.activeUser,a=void 0;e.rpc.get_account(e.accountName).then((function(t){a=t.permissions.filter((function(e){return"owner"===e.perm_name}))[0].required_auth.keys[0].key,n.setState({account:t,fields:Object.assign({},n.state.fields,{actor:e.accountName,owner_fio_public_key:a})}),e.rpc.fetch("/v1/chain/get_fio_balance",{fio_public_key:a}).then((function(e){return n.setState({balance:e})}))}))},n.getFee=function(){n.props.ual.activeUser.rpc.get_table_rows({code:"fio.fee",table:"fiofees",scope:"fio.fee",key_type:"i128",index_position:2,lower_bound:"0x4d41a1a623015e4f0eb5492057967e72",upper_bound:"0x4d41a1a623015e4f0eb5492057967e72",limit:1}).then((function(e){n.setState({fee:e.rows[0],fields:Object.assign({},n.state.fields,{max_fee:e.rows[0].suf_amount})})}))},n.hide=function(){return n.setState({show:!1})},n.show=function(){return n.setState({show:!0})},n.onChange=function(e,a){var t=a.name,r=a.value;return n.setState({fields:Object.assign({},n.state.fields,Object(T.a)({},t,r))})},n.transact=Object(y.a)(I.a.mark((function e(){var a,t,r,l,o;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.state.fields,t=n.props.ual.activeUser,e.prev=2,r=t.accountName,l=t.requestPermission,o={actions:[{account:"fio.address",name:"renewdomain",authorization:[{actor:r,permission:l}],data:a}]},e.next=7,t.signTransaction(o,{expireSeconds:120,blocksBehind:3});case 7:n.props.onSuccess(),n.hide(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),n.setState({errors:e.t0.cause.json.fields});case 14:case"end":return e.stop()}}),e,null,[[2,11]])}))),n.state={account:void 0,balance:void 0,errors:[],fee:void 0,fields:Object.assign({},V,{fio_domain:n.props.domain.name}),show:!1},console.log(n.props.domain.name),n}return Object(i.a)(t,[{key:"render",value:function(){var e=this,a=this.state,t=a.balance,n=a.errors,l=a.fee,o=a.fields,c=a.show;return r.a.createElement(k.a,{closeIcon:!0,content:r.a.createElement(p.a,{padded:!0,size:"large",style:{marginTop:0}},r.a.createElement(p.a,{color:"blue",secondary:!0},r.a.createElement(_.a,{size:"large"},r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"FIO Staked"),r.a.createElement(_.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,(t.staked/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"FIO Being Refunded"),r.a.createElement(_.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,((t.balance-t.available-t.staked)/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"FIO Available"),r.a.createElement(_.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,(t.available/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"Current FIO Balance"),r.a.createElement(_.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,(t.balance/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"Domain Renewal Fee"),r.a.createElement(_.a.Cell,{textAlign:"right"},l?r.a.createElement("strong",null,(l.suf_amount/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))))),r.a.createElement(R.a,{error:n.length,onSubmit:this.transact},Object.keys(o).map((function(a){var t=n.filter((function(e){return e.name===a})),l=Object(A.a)(t,1)[0];return"tpid"!==a&&r.a.createElement(R.a.Field,null,r.a.createElement("label",{style:{textTransform:"capitalize"}},a.replace(/_/g," ")),r.a.createElement(R.a.Input,{error:!!l&&{content:l.error,pointing:"above"},name:a,onChange:e.onChange,value:o[a]}))})),r.a.createElement(C.a,{error:!0,header:"An error occurred while submitting the transaction",content:"Check the red fields above to correct the problems and try again."}),r.a.createElement(p.a,{basic:!0,clearing:!0},r.a.createElement(O.a,{content:"Renew Domain",floated:"right",primary:!0})))),header:"Renew FIO Domain",open:c,onClose:this.hide,onOpen:this.onOpen,trigger:r.a.createElement(O.a,{basic:!0,content:"Renew Domain",onClick:this.show,primary:!0,size:"small"})})}}]),t}(n.Component),Z={fio_domain:"",is_public:0,max_fee:"",actor:"",tpid:"tpid@greymass"},Y=function(e){Object(u.a)(t,e);var a=Object(s.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).onOpen=function(e,a){n.resetData(),n.getFIOBalanceAndAccount(),n.getFee()},n.resetData=function(){return n.setState({account:void 0,balance:void 0,errors:[],fee:void 0,fields:Object.assign({},Z,{fio_domain:n.props.domain.name,is_public:n.props.domain.is_public?0:1})})},n.getFIOBalanceAndAccount=function(){var e=n.props.ual.activeUser,a=void 0;e.rpc.get_account(e.accountName).then((function(t){a=t.permissions.filter((function(e){return"owner"===e.perm_name}))[0].required_auth.keys[0].key,n.setState({account:t,fields:Object.assign({},n.state.fields,{actor:e.accountName,owner_fio_public_key:a})}),e.rpc.fetch("/v1/chain/get_fio_balance",{fio_public_key:a}).then((function(e){return n.setState({balance:e})}))}))},n.getFee=function(){n.props.ual.activeUser.rpc.get_table_rows({code:"fio.fee",table:"fiofees",scope:"fio.fee",key_type:"i128",index_position:2,lower_bound:"0xcc1f86ae2b6e01071a1998ffbcf27310",upper_bound:"0xcc1f86ae2b6e01071a1998ffbcf27310",limit:1}).then((function(e){n.setState({fee:e.rows[0],fields:Object.assign({},n.state.fields,{max_fee:e.rows[0].suf_amount})})}))},n.hide=function(){return n.setState({show:!1})},n.show=function(){return n.setState({show:!0})},n.onChange=function(e,a){var t=a.name,r=a.value;return n.setState({fields:Object.assign({},n.state.fields,Object(T.a)({},t,r))})},n.transact=Object(y.a)(I.a.mark((function e(){var a,t,r,l,o;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.state.fields,t=n.props.ual.activeUser,e.prev=2,r=t.accountName,l=t.requestPermission,o={actions:[{account:"fio.address",name:"setdomainpub",authorization:[{actor:r,permission:l}],data:a}]},e.next=7,t.signTransaction(o,{expireSeconds:120,blocksBehind:3});case 7:n.props.onSuccess(),n.hide(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),n.setState({errors:e.t0.cause.json.fields});case 14:case"end":return e.stop()}}),e,null,[[2,11]])}))),n.state={account:void 0,balance:void 0,errors:[],fee:void 0,fields:Object.assign({},Z,{fio_domain:n.props.domain.name,is_public:n.props.domain.is_public?0:1}),show:!1},n}return Object(i.a)(t,[{key:"render",value:function(){var e=this,a=this.state,t=a.balance,n=a.errors,l=a.fee,o=a.fields,c=a.show;return r.a.createElement(k.a,{closeIcon:!0,content:r.a.createElement(p.a,{padded:!0,size:"large",style:{marginTop:0}},r.a.createElement(p.a,{color:"blue",secondary:!0},r.a.createElement(_.a,{size:"large"},r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"FIO Staked"),r.a.createElement(_.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,(t.staked/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"FIO Being Refunded"),r.a.createElement(_.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,((t.balance-t.available-t.staked)/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"FIO Available"),r.a.createElement(_.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,(t.available/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"Current FIO Balance"),r.a.createElement(_.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,(t.balance/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"Domain Privacy Change Fee"),r.a.createElement(_.a.Cell,{textAlign:"right"},l?r.a.createElement("strong",null,(l.suf_amount/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))))),r.a.createElement(R.a,{error:n.length,onSubmit:this.transact},Object.keys(o).map((function(a){var t=n.filter((function(e){return e.name===a})),l=Object(A.a)(t,1)[0];return"tpid"!==a&&r.a.createElement(R.a.Field,null,r.a.createElement("label",{style:{textTransform:"capitalize"}},a.replace(/_/g," ")),r.a.createElement(R.a.Input,{error:!!l&&{content:l.error,pointing:"above"},name:a,onChange:e.onChange,value:o[a]}))})),r.a.createElement(C.a,{error:!0,header:"An error occurred while submitting the transaction",content:"Check the red fields above to correct the problems and try again."}),r.a.createElement(p.a,{basic:!0,clearing:!0},r.a.createElement(O.a,{content:this.props.domain.is_public?"Make Private":"Make Public",floated:"right",primary:!0})))),header:"Change Domain Privacy",open:c,onClose:this.hide,onOpen:this.onOpen,trigger:r.a.createElement(O.a,{basic:!0,content:this.props.domain.is_public?"Make Private":"Make Public",onClick:this.show,primary:!0,size:"small"})})}}]),t}(n.Component),W={disabled:!1,fio_domain:"",new_owner_fio_public_key:"",max_fee:"",actor:"",tpid:"tpid@greymass"},q=function(e){Object(u.a)(t,e);var a=Object(s.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).state={account:void 0,balance:void 0,disabled:!1,errors:[],fee:void 0,fields:W,show:!1},e.onOpen=function(a,t){e.resetData(),e.getFIOBalanceAndAccount(),e.getFee()},e.resetData=function(){return e.setState({account:void 0,balance:void 0,errors:[],fee:void 0,fields:Object.assign({},W,{fio_domain:e.props.domain.name})})},e.getFIOBalanceAndAccount=function(){var a=e.props.ual.activeUser,t=void 0;a.rpc.get_account(a.accountName).then((function(n){t=n.permissions.filter((function(e){return"owner"===e.perm_name}))[0].required_auth.keys[0].key,e.setState({account:n,fields:Object.assign({},e.state.fields,{actor:a.accountName,owner_fio_public_key:t})}),a.rpc.fetch("/v1/chain/get_fio_balance",{fio_public_key:t}).then((function(a){return e.setState({balance:a})}))}))},e.getFee=function(){e.props.ual.activeUser.rpc.get_table_rows({code:"fio.fee",table:"fiofees",scope:"fio.fee",key_type:"i128",index_position:2,lower_bound:"0x980f6aa5310bb851dc96f6a2d4521891",upper_bound:"0x980f6aa5310bb851dc96f6a2d4521891",limit:1}).then((function(a){a.rows.length?e.setState({disabled:!1,fee:a.rows[0],fields:Object.assign({},e.state.fields,{max_fee:a.rows[0].suf_amount})}):e.setState({disabled:!0})}))},e.hide=function(){return e.setState({show:!1})},e.show=function(){return e.setState({show:!0})},e.onChange=function(a,t){var n=t.name,r=t.value;return e.setState({fields:Object.assign({},e.state.fields,Object(T.a)({},n,r))})},e.transact=Object(y.a)(I.a.mark((function a(){var t,n,r,l,o;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.state.fields,n=e.props.ual.activeUser,a.prev=2,r=n.accountName,l=n.requestPermission,o={actions:[{account:"fio.address",name:"xferdomain",authorization:[{actor:r,permission:l}],data:t}]},a.next=7,n.signTransaction(o,{expireSeconds:120,blocksBehind:3});case 7:e.props.onSuccess(),e.hide(),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(2),console.log(a.t0),e.setState({errors:a.t0.cause.json.fields});case 15:case"end":return a.stop()}}),a,null,[[2,11]])}))),e}return Object(i.a)(t,[{key:"render",value:function(){var e=this,a=this.state,t=a.balance,n=a.disabled,l=a.errors,o=a.fee,c=a.fields,i=a.show;return n?r.a.createElement(k.a,{closeIcon:!0,content:r.a.createElement(p.a,{padded:!0,size:"large",style:{marginTop:0}},"Feature not yet available."),header:"Transfer a FIO Domain",open:i,onClose:this.hide,onOpen:this.onOpen,trigger:r.a.createElement(O.a,{basic:!0,content:"Transfer Domain",onClick:this.show,primary:!0,size:"small"})}):r.a.createElement(k.a,{closeIcon:!0,content:r.a.createElement(p.a,{padded:!0,size:"large",style:{marginTop:0}},r.a.createElement(p.a,{color:"blue",secondary:!0},r.a.createElement(_.a,{size:"large"},r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"FIO Staked"),r.a.createElement(_.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,(t.staked/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"FIO Being Refunded"),r.a.createElement(_.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,((t.balance-t.available-t.staked)/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"FIO Available"),r.a.createElement(_.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,(t.available/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"Current FIO Balance"),r.a.createElement(_.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,(t.balance/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"Domain Transfer Fee"),r.a.createElement(_.a.Cell,{textAlign:"right"},o?r.a.createElement("strong",null,(o.suf_amount/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))))),r.a.createElement(R.a,{error:l.length,onSubmit:this.transact},Object.keys(c).filter((function(e){return"disabled"!==e})).map((function(a){var t=l.filter((function(e){return e.name===a})),n=Object(A.a)(t,1)[0];return"tpid"!==a&&r.a.createElement(R.a.Field,null,r.a.createElement("label",{style:{textTransform:"capitalize"}},a.replace(/_/g," ")),r.a.createElement(R.a.Input,{error:!!n&&{content:n.error,pointing:"above"},name:a,onChange:e.onChange,value:c[a]}))})),r.a.createElement(C.a,{error:!0,header:"An error occurred while submitting the transaction",content:"Check the red fields above to correct the problems and try again."}),r.a.createElement(p.a,{basic:!0,clearing:!0},r.a.createElement(O.a,{content:"Transfer Domain",floated:"right",primary:!0})))),header:"Transfer a FIO Domain",open:i,onClose:this.hide,onOpen:this.onOpen,trigger:r.a.createElement(O.a,{basic:!0,content:"Transfer Domain",onClick:this.show,primary:!0,size:"small"})})}}]),t}(n.Component),Q=function(e){Object(u.a)(t,e);var a=Object(s.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).state={addresses:[],domains:[],owner_fio_public_key:""},e.sync=function(){var a=e.props.ual.activeUser;e.getDomains(a.accountName)},e.onSuccess=function(){e.sync()},e.getDomains=function(a){var t=e.props.ual.activeUser.rpc;t.get_table_rows({code:"fio.address",table:"domains",scope:"fio.address",key_type:"name",index_position:2,lower_bound:a,upper_bound:a,limit:10}).then((function(a){e.setState({domains:a.rows}),a.rows.length&&a.rows.map(e.getAddresses)})),t.get_account(a).then((function(a){e.setState({owner_fio_public_key:a.permissions.filter((function(e){return"owner"===e.perm_name}))[0].required_auth.keys[0].key})}))},e.getAddresses=function(a){e.props.ual.activeUser.rpc.get_table_rows({code:"fio.address",table:"fionames",scope:"fio.address",key_type:"i128",index_position:2,lower_bound:a.domainhash,upper_bound:a.domainhash,limit:10}).then((function(a){e.setState({addresses:Object(w.uniqBy)([].concat(Object(S.a)(e.state.addresses),Object(S.a)(a.rows)),"id")})}))},e}return Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.ual.activeUser&&this.sync()}},{key:"render",value:function(){var e=this,a=this.state,t=a.addresses,n=a.domains;return r.a.createElement(g.a,{fluid:!0},r.a.createElement(p.a,{attached:"top",clearing:!0,secondary:!0},r.a.createElement(b.a,{floated:"left",size:"large"},"FIO Domains",r.a.createElement(b.a.Subheader,null,"Manage the domains you control and address associations.")),r.a.createElement(O.a,{content:"Refresh Data",floated:"right",icon:"refresh",onClick:this.sync}),r.a.createElement(G,{onSuccess:this.onSuccess,ual:this.props.ual}),r.a.createElement("a",{class:"ui blue right floated button",href:"https://reg.fioprotocol.io/domain/fioreghelper?publicKey="+this.state.owner_fio_public_key},r.a.createElement("i",{"aria-hidden":"true",class:"dollar icon"}),"Buy FIO Domain")),!n.length&&r.a.createElement(p.a,{attached:"bottom",size:"large",textAlign:"center"},r.a.createElement(b.a,null,"No domains associated to this account. Register one to get started.")),!!n.length&&r.a.createElement(_.a,{attached:"bottom",padded:!0,striped:!0},r.a.createElement(_.a.Header,null,r.a.createElement(_.a.Row,null,r.a.createElement(_.a.HeaderCell,null,"Domain Name"),r.a.createElement(_.a.HeaderCell,null,"Addresses"))),r.a.createElement(_.a.Body,null,n.map((function(a){var n=t.filter((function(e){return e.domain===a.name}));return r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,{collapsing:!0,verticalAlign:"top"},r.a.createElement(b.a,null,"@",a.name),r.a.createElement(_.a,{definition:!0},r.a.createElement(_.a.Body,null,r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,a.is_public?"Public":"Private"),r.a.createElement(_.a.Cell,null,r.a.createElement(Y,{domain:a,onSuccess:e.onSuccess,ual:e.props.ual}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"Expires"),r.a.createElement(_.a.Cell,null,new Date(1e3*a.expiration).toUTCString())),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"Renew"),r.a.createElement(_.a.Cell,null,r.a.createElement(K,{domain:a,onSuccess:e.onSuccess,ual:e.props.ual}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"Transfer"),r.a.createElement(_.a.Cell,null,r.a.createElement(q,{domain:a,onSuccess:e.onSuccess,ual:e.props.ual})))))),r.a.createElement(_.a.Cell,{textAlign:"right"},n.length?r.a.createElement(_.a,{definition:!0},r.a.createElement(_.a.Body,null,n.map((function(e){return r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,e.name),r.a.createElement(_.a.Cell,null,e.addresses[0].public_address,r.a.createElement("br",null),"Expires: ",new Date(1e3*e.expiration).toLocaleDateString()))})))):r.a.createElement(p.a,{textAlign:"left"},r.a.createElement(b.a,{size:"small"},"No associated addresses",r.a.createElement(b.a.Subheader,null,"Create a new FIO address for this domain using the button below."))),r.a.createElement(N,{domain:a,onSuccess:e.onSuccess,ual:e.props.ual})))})))))}}]),t}(n.Component),J={fio_address:"",amount:"",max_fee:"",actor:"",tpid:""},$=function(e){Object(u.a)(t,e);var a=Object(s.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).state={account:void 0,balance:void 0,errors:[],fee:void 0,fields:J,show:!1},e.onOpen=function(a,t){e.resetData(),e.getFIOBalanceAndAccount(),e.getFee()},e.resetData=function(){return e.setState({account:void 0,balance:void 0,errors:[],fee:void 0,fields:J})},e.getFIOBalanceAndAccount=function(){var a=e.props.ual.activeUser,t=void 0;a.rpc.get_account(a.accountName).then((function(n){t=n.permissions.filter((function(e){return"owner"===e.perm_name}))[0].required_auth.keys[0].key,e.setState({account:n,fields:Object.assign({},e.state.fields,{actor:a.accountName,owner_fio_public_key:t})}),a.rpc.fetch("/v1/chain/get_fio_balance",{fio_public_key:t}).then((function(a){return e.setState({balance:a})}))}))},e.getFee=function(){e.props.ual.activeUser.rpc.get_table_rows({code:"fio.fee",table:"fiofees",scope:"fio.fee",key_type:"i128",index_position:2,lower_bound:"0x83c48bde1205347001e4ddd44c571f78",upper_bound:"0x83c48bde1205347001e4ddd44c571f78",limit:1}).then((function(a){e.setState({fee:a.rows[0],fields:Object.assign({},e.state.fields,{max_fee:a.rows[0].suf_amount+1e8})})}))},e.hide=function(){return e.setState({show:!1})},e.show=function(){return e.setState({show:!0})},e.onChange=function(a,t){var n=t.name,r=t.value;return e.setState({fields:Object.assign({},e.state.fields,Object(T.a)({},n,r))})},e.transact=Object(y.a)(I.a.mark((function a(){var t,n,r,l,o;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.state.fields,n=e.props.ual.activeUser,a.prev=2,r=n.accountName,l=n.requestPermission,o={actions:[{account:"fio.staking",name:"stakefio",authorization:[{actor:r,permission:l}],data:t}]},a.next=7,n.signTransaction(o,{expireSeconds:120,blocksBehind:3});case 7:e.props.onSuccess(),e.hide(),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(2),e.setState({errors:a.t0.cause.json.fields});case 14:case"end":return a.stop()}}),a,null,[[2,11]])}))),e}return Object(i.a)(t,[{key:"render",value:function(){var e=this,a=this.state,t=a.balance,n=a.errors,l=a.fee,o=a.fields,c=a.show;return r.a.createElement(k.a,{closeIcon:!0,content:r.a.createElement(p.a,{padded:!0,size:"large",style:{marginTop:0}},r.a.createElement(p.a,{color:"blue",secondary:!0},r.a.createElement(_.a,{size:"large"},r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"FIO Staked"),r.a.createElement(_.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,(t.staked/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"FIO Being Refunded"),r.a.createElement(_.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,((t.balance-t.available-t.staked)/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"FIO Available"),r.a.createElement(_.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,(t.available/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"Current FIO Balance"),r.a.createElement(_.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,(t.balance/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"Staking Fee"),r.a.createElement(_.a.Cell,{textAlign:"right"},l?r.a.createElement("strong",null,(l.suf_amount/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))))),r.a.createElement(p.a,null,r.a.createElement("text",null,r.a.createElement("p",null,r.a.createElement("strong",null,"Note:")," Amount and Max Fee are denominated in in SUFs or Smallest Units of FIO. To denominate in FIO, add nine zeros.",r.a.createElement("br",null),"For example, 100 FIO is 100000000000 SUF. Add nine zeros to the number of FIO you want to stake or unstake.",r.a.createElement("br",null),"Once you unstake tokens, you must wait 7 days before your unstaked tokens will be available to transfer.",r.a.createElement("br",null),"If you're looking for a valid proxy to use in the Tpid field:",r.a.createElement("br",null),"Testnet: proxy@fiotestnet",r.a.createElement("br",null),"Mainnet: proxy@greymass",r.a.createElement("br",null)))),r.a.createElement(R.a,{error:n.length,onSubmit:this.transact},Object.keys(o).map((function(a){var t=n.filter((function(e){return e.name===a})),l=Object(A.a)(t,1)[0];return r.a.createElement(R.a.Field,null,r.a.createElement("label",{style:{textTransform:"capitalize"}},a.replace("fio_address","crypto_handle").replace(/_/g," ")),r.a.createElement(R.a.Input,{error:!!l&&{content:l.error,pointing:"above"},name:a,onChange:e.onChange,value:o[a]}))})),r.a.createElement(C.a,{error:!0,header:"An error occurred while submitting the transaction",content:"Check the red fields above to correct the problems and try again."}),r.a.createElement(p.a,{basic:!0,clearing:!0},r.a.createElement(O.a,{content:"Stake FIO Tokens",floated:"right",primary:!0})))),header:"Stake FIO Tokens",open:c,onClose:this.hide,onOpen:this.onOpen,trigger:r.a.createElement(O.a,{content:"Stake FIO",floated:"right",icon:"plus",onClick:this.show,primary:!0})})}}]),t}(n.Component),ee={fio_address:"",amount:"",max_fee:"",actor:"",tpid:""},ae=function(e){Object(u.a)(t,e);var a=Object(s.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).state={account:void 0,balance:void 0,errors:[],fee:void 0,fields:ee,show:!1},e.onOpen=function(a,t){e.resetData(),e.getFIOBalanceAndAccount(),e.getFee()},e.resetData=function(){return e.setState({account:void 0,balance:void 0,errors:[],fee:void 0,fields:ee})},e.getFIOBalanceAndAccount=function(){var a=e.props.ual.activeUser,t=void 0;a.rpc.get_account(a.accountName).then((function(n){t=n.permissions.filter((function(e){return"owner"===e.perm_name}))[0].required_auth.keys[0].key,e.setState({account:n,fields:Object.assign({},e.state.fields,{actor:a.accountName,owner_fio_public_key:t})}),a.rpc.fetch("/v1/chain/get_fio_balance",{fio_public_key:t}).then((function(a){return e.setState({balance:a})}))}))},e.getFee=function(){e.props.ual.activeUser.rpc.get_table_rows({code:"fio.fee",table:"fiofees",scope:"fio.fee",key_type:"i128",index_position:2,lower_bound:"0x85248efc2886d68989b010f21cb2f480",upper_bound:"0x85248efc2886d68989b010f21cb2f480",limit:1}).then((function(a){e.setState({fee:a.rows[0],fields:Object.assign({},e.state.fields,{max_fee:a.rows[0].suf_amount+1e8})})}))},e.hide=function(){return e.setState({show:!1})},e.show=function(){return e.setState({show:!0})},e.onChange=function(a,t){var n=t.name,r=t.value;return e.setState({fields:Object.assign({},e.state.fields,Object(T.a)({},n,r))})},e.transact=Object(y.a)(I.a.mark((function a(){var t,n,r,l,o;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.state.fields,n=e.props.ual.activeUser,a.prev=2,r=n.accountName,l=n.requestPermission,o={actions:[{account:"fio.staking",name:"unstakefio",authorization:[{actor:r,permission:l}],data:t}]},a.next=7,n.signTransaction(o,{expireSeconds:120,blocksBehind:3});case 7:e.props.onSuccess(),e.hide(),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(2),e.setState({errors:a.t0.cause.json.fields});case 14:case"end":return a.stop()}}),a,null,[[2,11]])}))),e}return Object(i.a)(t,[{key:"render",value:function(){var e=this,a=this.state,t=a.balance,n=a.errors,l=a.fee,o=a.fields,c=a.show;return r.a.createElement(k.a,{closeIcon:!0,content:r.a.createElement(p.a,{padded:!0,size:"large",style:{marginTop:0}},r.a.createElement(p.a,{color:"blue",secondary:!0},r.a.createElement(_.a,{size:"large"},r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"FIO Staked"),r.a.createElement(_.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,(t.staked/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"FIO Being Refunded"),r.a.createElement(_.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,((t.balance-t.available-t.staked)/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"FIO Available"),r.a.createElement(_.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,(t.available/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"Current FIO Balance"),r.a.createElement(_.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,(t.balance/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"Staking Fee"),r.a.createElement(_.a.Cell,{textAlign:"right"},l?r.a.createElement("strong",null,(l.suf_amount/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))))),r.a.createElement(p.a,null,r.a.createElement("text",null,r.a.createElement("p",null,r.a.createElement("strong",null,"Note:")," Amount and Max Fee are denominated in in SUFs or Smallest Units of FIO. To denominate in FIO, add nine zeros.",r.a.createElement("br",null),"For example, 100 FIO is 100000000000 SUF. Add nine zeros to the number of FIO you want to stake or unstake.",r.a.createElement("br",null),"Once you unstake tokens, you must wait 7 days before your unstaked tokens will be available to transfer.",r.a.createElement("br",null),"If you're looking for a valid proxy to use in the Tpid field:",r.a.createElement("br",null),"Testnet: proxy@fiotestnet",r.a.createElement("br",null),"Mainnet: proxy@greymass",r.a.createElement("br",null)))),r.a.createElement(R.a,{error:n.length,onSubmit:this.transact},Object.keys(o).map((function(a){var t=n.filter((function(e){return e.name===a})),l=Object(A.a)(t,1)[0];return r.a.createElement(R.a.Field,null,r.a.createElement("label",{style:{textTransform:"capitalize"}},a.replace("fio_address","crypto_handle").replace(/_/g," ")),r.a.createElement(R.a.Input,{error:!!l&&{content:l.error,pointing:"above"},name:a,onChange:e.onChange,value:o[a]}))})),r.a.createElement(C.a,{error:!0,header:"An error occurred while submitting the transaction",content:"Check the red fields above to correct the problems and try again."}),r.a.createElement(p.a,{basic:!0,clearing:!0},r.a.createElement(O.a,{content:"Unstake FIO Tokens",floated:"right",primary:!0})))),header:"Unstake FIO Tokens",open:c,onClose:this.hide,onOpen:this.onOpen,trigger:r.a.createElement(O.a,{content:"Unstake FIO",floated:"right",icon:"plus",onClick:this.show,primary:!0})})}}]),t}(n.Component),te=function(e){Object(u.a)(t,e);var a=Object(s.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).state={balance:void 0},e.sync=function(){e.props.ual.activeUser;e.getFIOBalance()},e.onSuccess=function(){e.sync()},e.getFIOBalance=function(){var a=e.props.ual.activeUser;a.rpc.get_account(a.accountName).then((function(t){a.rpc.fetch("/v1/chain/get_fio_balance",{fio_public_key:t.permissions.filter((function(e){return"owner"===e.perm_name}))[0].required_auth.keys[0].key}).then((function(a){return e.setState({balance:a})}))}))},e}return Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.ual.activeUser&&this.sync()}},{key:"render",value:function(){var e=this.state.balance;return r.a.createElement(g.a,{fluid:!0},r.a.createElement(p.a,{attached:"top",clearing:!0,secondary:!0},r.a.createElement(b.a,{floated:"left",size:"large"},"FIO Token Staking",r.a.createElement(b.a.Subheader,null,"If you have voted or set a proxy, your FIO tokens can be staked.")),r.a.createElement(O.a,{content:"Refresh Data",floated:"right",icon:"refresh",onClick:this.sync})),r.a.createElement(p.a,{color:"blue",secondary:!0},r.a.createElement(_.a,{size:"large"},r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"FIO Staked"),r.a.createElement(_.a.Cell,{textAlign:"right"},e?r.a.createElement("strong",null,(e.staked/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0})),r.a.createElement(_.a.Cell,{textAlign:"right"},r.a.createElement(ae,{onSuccess:this.onSuccess,ual:this.props.ual}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"FIO Being Refunded"),r.a.createElement(_.a.Cell,{textAlign:"right"},e?r.a.createElement("strong",null,((e.balance-e.available-e.staked)/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"FIO Available"),r.a.createElement(_.a.Cell,{textAlign:"right"},e?r.a.createElement("strong",null,(e.available/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0})),r.a.createElement(_.a.Cell,{textAlign:"right"},r.a.createElement($,{onSuccess:this.onSuccess,ual:this.props.ual}))),r.a.createElement(_.a.Row,null,r.a.createElement(_.a.Cell,null,"Current FIO Balance"),r.a.createElement(_.a.Cell,{textAlign:"right"},e?r.a.createElement("strong",null,(e.balance/1e9).toFixed(9)," FIO"):r.a.createElement(x.a,{name:"spinner",loading:!0}))))))}}]),t}(n.Component),ne=function(e){Object(u.a)(t,e);var a=Object(s.a)(t);function t(){return Object(c.a)(this,t),a.apply(this,arguments)}return Object(i.a)(t,[{key:"render",value:function(){var e=this.props.ual,a=e.chains,t=[{menuItem:"Crypto Handle Management",render:function(){return r.a.createElement(E.a.Pane,null,r.a.createElement(H,{ual:e}))}},{menuItem:"Domain Management",render:function(){return r.a.createElement(E.a.Pane,null,r.a.createElement(Q,{ual:e}))}},{menuItem:"Staking",render:function(){return r.a.createElement(E.a.Pane,null,r.a.createElement(te,{ual:e}))}}];return r.a.createElement(g.a,{style:{margin:"3em 0"}},r.a.createElement(h.a,{relaxed:!0},r.a.createElement(h.a.Row,null,r.a.createElement(h.a.Column,{width:10},r.a.createElement(b.a,{size:"large"},"FIO Registration Helper",r.a.createElement(b.a.Subheader,null,"A tool to assist with domain and address registration."))),r.a.createElement(h.a.Column,{width:6,textAlign:"right"},r.a.createElement(v,{ual:e}))),"b20901380af44ef59c5918439a1f9a41d83669020319a80574b804a5f95cbd7e"===a[0].chainId?r.a.createElement(h.a.Row,{columns:1},r.a.createElement(h.a.Column,null,r.a.createElement(C.a,{content:"This app is in developer mode and uses the FIO Testnet (".concat(a[0].chainId,")."),header:"TESTNET Mode",icon:"warning sign",size:"large",warning:!0}))):r.a.createElement(h.a.Row,{columns:1},r.a.createElement(h.a.Column,null,r.a.createElement(C.a,{content:"This app is in a BETA product and is connected to the FIO Mainnet (".concat(a[0].chainId,")."),header:"FIO Mainnet",icon:"info circle",info:!0,size:"large"}))),r.a.createElement(h.a.Row,{columns:1},r.a.createElement(h.a.Column,null,e.activeUser?r.a.createElement(E.a,{menu:{attached:"top",icon:"home",size:"huge",tabular:!0},panes:t}):r.a.createElement(p.a,{size:"large",stacked:!0,textAlign:"center"},r.a.createElement("p",null,"Login to manage domains and addresses for the FIO blockchain."),r.a.createElement(v,{ual:e}))))))}}]),t}(n.Component),re={chainId:"21dcae42c0182200e93f954a074011f9048a7624c6fe81d3c9541a614a88bd1c",name:"FIO",rpcEndpoints:[{protocol:"https",host:"fio.greymass.com",port:443}]},le={chainId:"b20901380af44ef59c5918439a1f9a41d83669020319a80574b804a5f95cbd7e",name:"FIO Testnet",rpcEndpoints:[{protocol:"https",host:"fiotestnet.blockpane.com",port:443}]},oe=function(e){Object(u.a)(t,e);var a=Object(s.a)(t);function t(){return Object(c.a)(this,t),a.apply(this,arguments)}return Object(i.a)(t,[{key:"render",value:function(){var e=re;"?testnet"===window.location.search&&(e=le);var a=new d.Anchor([e],{appName:"fio-register"}),t=new m.Scatter([e],{appName:"fio-register"});return r.a.createElement(f.UALProvider,{appName:"FIO Registration",authenticators:[a,t],chains:[e]},r.a.createElement(ce,null),r.a.createElement(p.a,{basic:!0,textAlign:"center"},"b20901380af44ef59c5918439a1f9a41d83669020319a80574b804a5f95cbd7e"===e.chainId?r.a.createElement("a",{href:"/fio-register"},"Switch to use FIO Mainnet"):r.a.createElement("a",{href:"/fio-register?testnet"},"Switch to use FIO Testnet")))}}]),t}(n.Component),ce=Object(f.withUAL)(ne),ie=function(){return r.a.createElement(oe,null)},se=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ue(e,a){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(e)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}t(812);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ie,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/fio-register",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var a="".concat("/fio-register","/service-worker.js");se?(!function(e,a){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var n=t.headers.get("content-type");404===t.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ue(e,a)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(a,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ue(a,e)}))}}()}},[[421,1,2]]]);
//# sourceMappingURL=main.1dd61a64.chunk.js.map