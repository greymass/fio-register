(this["webpackJsonpfio-register"]=this["webpackJsonpfio-register"]||[]).push([[0],{409:function(e,a,t){e.exports=t(816)},452:function(e,a){},454:function(e,a){},536:function(e,a){},557:function(e,a){},558:function(e,a){},814:function(e,a,t){},816:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),c=t(87),o=t.n(c),l=t(31),s=t(32),i=t(33),u=t(34),d=t(371),m=t(372),E=t(234),f=t(239),C=t(830),p=t(825),h=t(397),O=t(833),g=t(831),S=t(832),b=function(e){Object(u.a)(t,e);var a=Object(i.a)(t);function t(){return Object(l.a)(this,t),a.apply(this,arguments)}return Object(s.a)(t,[{key:"render",value:function(){var e=this.props.ual.activeUser;return e?r.a.createElement(f.a,{secondary:!0,stacked:!0},r.a.createElement(O.a,null,r.a.createElement(O.a.Content,null,r.a.createElement(O.a.Subheader,null,"Current Account"),r.a.createElement("span",null,e.accountName,"@",e.requestPermission)),r.a.createElement(S.a,{basic:!0,onClick:this.props.ual.logout,style:{marginLeft:"1em"}},"Sign out"))):r.a.createElement(S.a,{content:"Sign in",onClick:this.props.ual.showModal,size:"large",primary:!0})}}]),t}(n.Component),A=t(106),T=t(67),N=t(829),B=t(169),R=t(21),I=t.n(R),v=t(101),w=t(88),D=t(827),L=t(107),X=t(826),y=["BTC","EOS","$DAG","8BIT","ABA","ABBC","ABT","AC","ACC","ACM","ACT","ADA","ADF","ADS","AE","AEON","AERGO","AGM","AIB","AILE","AIN","AION","AKA","ALGO","AMA","AMO","AMS","ANDES","ANK","ANON","AOA","AQUA","AR","ARA","ARDR","AREPA","ARG","ARK","ARW","ASF","ASK","ATC","ATH","ATN","ATOM","ATP","ATS","AUDAX","AUR","AUX","AXE","AYA","BALLZ","BANANO","BAND","BARE","BBC","BC","BCA","BCC","BCD","BCH","BCN","BCO","BCS","BCX","BCZ","BEAM","BEET","BELA","BELL","BHD","BHT","BIFI","BIGUP","BIO","BIP","BIQ","BIS","BITB","BITC","BITG","BKT","BLAST","BLK","BLOCK","BMV","BNB","BND","BNT","BOLD","BOLI","BOPO","BOXY","BPA","BRAVO","BRIT","BRK","BSD","BSQ","BST","BSV","BTA","BTC2","BTC2X","BTCC","BTCD","BTCP","BTCR","BTCS","BTCV","BTCZ","BTDX","BTF","BTG","BTH","BTM","BTN","BTP","BTQ","BTR","BTS","BTT","BTV","BTW","BTX","BTY","BU","BURST","BUZZ","BZX","CCA","CCC","CCN","CCX","CDN","CDY","CENNZ","CET","CFX","cGLD","CHC","CHX","CITY","CKB","CLAM","CLC","CLO","CLR","CLUB","CLX","CMM","CMP","CMT","CNMC","COCOS","COIN","COLX","COS","CPC","CPS","CPU","CRAVE","CRO","CRP","CRUZ","CRW","CRX","CS","CSC","CSDT","CYB","CZR","DAPS","DASH","DBIC","DBT","DCR","DCT","DEO","DFC","DGB","DGC","DGLD","DIN","DIVI","DLC","DMD","DMTC","DNR","DOGE","DOGEC","DONU","DOPE","DOT","DROP","DSM","DST","DT3","DTP","DVT","DX","DXN","DYN","EARTH","EARTHS","EAST","EBST","EC","ECA","ECC","ECN","EDRC","EFL","EGEM","ELA","ELF","ELLA","EM","EMC2","EOSC","ERC","ERE","ERG","ESN","ESS","ETC","ETF","ETH","ETHO","ETI","ETN","ETP","ETSC","EUNO","EVE","EVO","EVT","EWT","EXCL","EXOS","EXP","FAIR","FC8","FCH","FCT","FCTID","FIC","FIL","FIMK","FIN","FIO","FIX","FJC","FLASH","FLO","FLUID","FO","FREE","FRST","FSN","FTC","FXTC","GALI","GAME","GARD","GB","GBT","GBX","GC","GCR","GENOM","GFN","GIN","GLEEC","GNX","GO","GOD","GRC","GRS","GXC","GXX","HASH","HATCH","HDD","HEAT","HET","HLM","HNC","HNS","HODL","HPB","HSN","HSR","HTDF","HTH","HTML","HTR","HUSH","HYC","HYD","ICU","ICX","ILT","IMG","INSN","IOC","ION","IOP","IOST","IOTA","IoTE","IOTX","IOV","IPC","IPOS","IXC","JBS","JCT","KAL","KAVA","KETH","KEX","KIN","KMD","KOBO","KOTO","KPG","KPL","KSM","KTS","KTV","KUMA","kUSD","KUVA","LAMB","LAT","LAX","LBC","LBTC","LCC","LCH","LDCN","LET","LHD","LINDA","LINX","LKR","LMO","LN","LOKI","LSK","LTC","LTHN","LTO","LTZ","LUNA","LUX","LV","LYRA","MAN","MARS","MASS","MBRS","MCASH","MCM","MDM","MEC","MED","MEM","MESG","META","MIX","MNP","MNX","MOAC","MOIN","MONA","MONK","MOON","MSR","MTNS","MTR","MUE","MUSIC","MXT","MXW","MZC","N8V","NANO","NAS","NAV","NBT","NCH","NEAR","NEBL","NEET","NEO","NEOS","NIM","NIX","NLC2","NLG","NMC","NODE","NOLLAR","NOS","NPW","NRG","NRO","NSR","NTY","NUKO","NULS","NVC","NXS","NXT","NYC","NYZO","OBSR","OCEAN","ODN","ODX","OGC","OGO","OK","OKP","OLO","OLT","OMNI","ONE","ONION","ONT","ONX","OOT","PART","PCN","PCX","PESO","PEXA","PHL","PHR","PINK","PION","PIRL","PIVX","PKB","PKC","PKT","PLUG","PND","POA","POLIS","POT","PPC","PRJ","PRKL","PSB","PTC","PTN","PUT","PWR","QBC","QKC","QLC","QOS","QRK","QRL","QTUM","QVT","RAP","RBTC","RBY","RDD","REOSC","RES","RIC","RICHX","RIL","RIN","RISE","RITO","RNG","ROGER","ROI","ROSE","RPD","RPT","RUPX","RUTA","RVN","RYO","SAFE","SBC","SBTC","SDC","SDGO","SEELE","SEM","SEOS","SEQ","SFRX","SH","SHARD","SHIT","SHM","SHN","SHR","SIN","SKY","SLP","SLR","SLU","SLX","SMART","SMLY","SNOW","SOL","SOOM","SOV","SOX","SPL","SSC","SSN","SSP","STAK","START","STASH","STEEM","STO","STRAT","STX","SUGAR","SUM","SUMO","SWIFT","SWTC","SYS","TAN","TEA","TELOS","TEO","TES","THC","THETA","THT","TKEY","TNET","TOA","TOMO","TON","TPAY","TPC","TRC","TRTL","TRUE","TRX","TT","TWINS","TZC","UBQ","UC","UFO","UGAS","ULC","UMBRU","UND","UNIFY","UNO","USC","USDP","USE","UTE","VAR","VASH","VC","VCT","VDL","VEE","VEIL","VEO","VESTX","VET","VGO","VIA","VIPS","VITAE","VITE","VIVO","VNSC","VOX","VSYS","VTC","WAN","WAVES","WBTC","WC","WE","WEB","WGR","WHL","WICC","WOW","X42","XAS","XAX","XBC","XBI","XCH","XCP","XCX","XDAI","XDN","XEM","XERO","XFE","XHB","XLM","XLR","XMCC","XMR","XMX","XMY","XND","XNOS","XNS","XPC","XPM","XRD","XRP","XRPHD","XSEL","XSG","XSN","XSPEC","XST","XTH","XTL","XTNC","XTX","XTZ","XUEZ","XVG","XWC","XYM","XZC","YAP","YCC","YCE","YEC","YEE","ZBUX","ZCL","ZCR","ZEC","ZEL","ZEN","ZER","ZEST","ZIL","ZILLA","ZNY","ZNZ","ZOC","ZOOM","ZPM","ZRC","ZSLP","ZVC","ZY"],M={fio_address:"",public_addresses:[],max_fee:"",actor:"",tpid:"tpid@greymass"},_=function(e){Object(u.a)(t,e);var a=Object(i.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).onOpen=function(e,a){n.resetData(),n.getAccount(),n.getBalance(),n.getFee()},n.resetData=function(){return n.setState({account:void 0,balance:void 0,errors:[],fee:void 0,fields:Object.assign({},M,{fio_address:n.props.address.name})})},n.getAccount=function(){var e=n.props.ual.activeUser;e.rpc.get_account(e.accountName).then((function(a){n.setState({account:a,fields:Object.assign({},n.state.fields,{actor:e.accountName})})}))},n.getBalance=function(){var e=n.props.ual.activeUser;e.rpc.get_currency_balance("fio.token",e.accountName,"fio").then((function(e){return n.setState({balance:e})}))},n.getFee=function(){n.props.ual.activeUser.rpc.get_table_rows({code:"fio.fee",table:"fiofees",scope:"fio.fee",key_type:"i128",index_position:2,lower_bound:"0x1769ecaf35c00341b5a2e1760114648e",upper_bound:"0x1769ecaf35c00341b5a2e1760114648e",limit:1}).then((function(e){n.setState({fee:e.rows[0],fields:Object.assign({},n.state.fields,{max_fee:e.rows[0].suf_amount})})}))},n.hide=function(){return n.setState({show:!1})},n.show=function(){return n.setState({show:!0})},n.onChange=function(e,a){var t=a.name,r=a.value;return n.setState({fields:Object.assign({},n.state.fields,Object(w.a)({},t,r))})},n.onChangeAddress=function(e,a){var t=a.name,r=a.value;console.log(t,r),n.setState({fields:Object.assign({},n.state.fields,{public_addresses:[Object.assign({},n.state.fields.public_addresses[0],Object(w.a)({},t,r))]})})},n.transact=Object(v.a)(I.a.mark((function e(){var a,t,r,c,o;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.state.fields,t=n.props.ual.activeUser,e.prev=2,r=t.accountName,c=t.requestPermission,o={actions:[{account:"fio.address",name:"addaddress",authorization:[{actor:r,permission:c}],data:a}]},e.next=7,t.signTransaction(o,{expireSeconds:120,blocksBehind:3});case 7:n.props.onSuccess(),n.hide(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0),n.setState({errors:e.t0.cause.json.fields});case 15:case"end":return e.stop()}}),e,null,[[2,11]])}))),n.symbols=y.map((function(e){return{key:e,text:e,value:e}})),n.state={account:void 0,balance:void 0,errors:[],fee:void 0,fields:Object.assign({},M,{fio_address:n.props.address.name}),show:!1},console.log(n.props.address.name),n}return Object(s.a)(t,[{key:"render",value:function(){var e=this,a=this.state,t=a.balance,n=a.errors,c=a.fee,o=a.fields,l=a.show;return r.a.createElement(D.a,{closeIcon:!0,content:r.a.createElement(f.a,{padded:!0,size:"large",style:{marginTop:0}},r.a.createElement(f.a,{color:"blue",secondary:!0},r.a.createElement(N.a,{size:"large"},r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Cell,null,"Current FIO Balance"),r.a.createElement(N.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,t[0]):r.a.createElement(L.a,{name:"spinner",loading:!0}))),r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Cell,null,"Address Registration Fee"),r.a.createElement(N.a.Cell,{textAlign:"right"},c?r.a.createElement("strong",null,(c.suf_amount/1e9).toFixed(9)," FIO"):r.a.createElement(L.a,{name:"spinner",loading:!0}))))),r.a.createElement(X.a,{error:n.length,onSubmit:this.transact},Object.keys(o).map((function(a){var t=n.filter((function(e){return e.name===a})),c=Object(T.a)(t,1)[0];return"tpid"!==a&&("public_addresses"===a?r.a.createElement(X.a.Field,null,r.a.createElement("label",null,"Chain Code"),r.a.createElement(X.a.Dropdown,{autoFocus:!0,onChange:e.onChangeAddress,options:e.symbols,name:"chain_code",search:!0,selection:!0}),r.a.createElement("label",null,"Token Symbol"),r.a.createElement(X.a.Input,{name:"token_code",onChange:e.onChangeAddress,search:!0,selection:!0}),r.a.createElement("label",null,"Public Address"),r.a.createElement(X.a.Input,{name:"public_address",onChange:e.onChangeAddress,search:!0,selection:!0})):r.a.createElement(X.a.Field,null,r.a.createElement("label",{style:{textTransform:"capitalize"}},a.replace("_"," ")),r.a.createElement(X.a.Input,{error:!!c&&{content:c.error,pointing:"above"},name:a,onChange:e.onChange,value:o[a]})))})),r.a.createElement(g.a,{error:!0,header:"An error occurred while submitting the transaction",content:"Check the red fields above to correct the problems and try again."}),r.a.createElement(f.a,{basic:!0,clearing:!0},r.a.createElement(S.a,{content:"Add Address Association",floated:"right",primary:!0})))),header:"Associate an address",open:l,onClose:this.hide,onOpen:this.onOpen,trigger:r.a.createElement(S.a,{basic:!0,content:"Add Address Association",icon:"plus",onClick:this.show,primary:!0,size:"small"})})}}]),t}(n.Component),P=function(e){Object(u.a)(t,e);var a=Object(i.a)(t);function t(){var e;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=a.call.apply(a,[this].concat(r))).state={addresses:[]},e.sync=function(){var a=e.props.ual.activeUser;e.getAddresses(a.accountName)},e.onSuccess=function(){e.sync()},e.getAddresses=function(a){e.props.ual.activeUser.rpc.get_table_rows({code:"fio.address",table:"fionames",scope:"fio.address",key_type:"name",index_position:4,lower_bound:a,upper_bound:a,limit:10}).then((function(t){var n={owner_account:a},r=Object(B.partition)(e.state.addresses,n),c=Object(T.a)(r,2)[1];e.setState({addresses:[].concat(Object(A.a)(c),Object(A.a)(t.rows))})}))},e}return Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.ual.activeUser&&this.sync()}},{key:"render",value:function(){var e=this,a=this.state.addresses;return r.a.createElement(p.a,{fluid:!0},r.a.createElement(f.a,{attached:"top",clearing:!0,secondary:!0},r.a.createElement(O.a,{floated:"left",size:"large"},"FIO Addresses",r.a.createElement(O.a.Subheader,null,"Manage the addresses you control and their associated keys.")),r.a.createElement(S.a,{content:"Refresh Data",floated:"right",icon:"refresh",onClick:this.sync})),!a.length&&r.a.createElement(f.a,{attached:"bottom",size:"large",textAlign:"center"},r.a.createElement(O.a,null,"No addresses associated to this account. Register one to get started.")),!!a.length&&r.a.createElement(N.a,{attached:"bottom",padded:!0,striped:!0},r.a.createElement(N.a.Header,null,r.a.createElement(N.a.Row,null,r.a.createElement(N.a.HeaderCell,null,"Domain Name"),r.a.createElement(N.a.HeaderCell,null,"Addresses"))),r.a.createElement(N.a.Body,null,a.map((function(a){return r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Cell,{collapsing:!0,verticalAlign:"top"},r.a.createElement(O.a,null,a.name),r.a.createElement(N.a,{definition:!0},r.a.createElement(N.a.Body,null,r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Cell,null,"Bundled Txs"),r.a.createElement(N.a.Cell,null,a.bundleeligiblecountdown)),r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Cell,null,"Expires"),r.a.createElement(N.a.Cell,null,new Date(1e3*a.expiration).toUTCString()))))),r.a.createElement(N.a.Cell,{textAlign:"right"},a.addresses.length?r.a.createElement(N.a,{definition:!0},r.a.createElement(N.a.Header,null,r.a.createElement(N.a.Row,null,r.a.createElement(N.a.HeaderCell,null,"Chain"),r.a.createElement(N.a.HeaderCell,null,"Token"),r.a.createElement(N.a.HeaderCell,null,"Address"))),r.a.createElement(N.a.Body,null,a.addresses.map((function(e){return r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Cell,null,e.chain_code),r.a.createElement(N.a.Cell,null,e.token_code),r.a.createElement(N.a.Cell,null,e.public_address))})))):r.a.createElement(f.a,{textAlign:"left"},r.a.createElement(O.a,{size:"small"},"No associated addresses",r.a.createElement(O.a.Subheader,null,"Create a new FIO address for this domain using the button below."))),r.a.createElement(_,{address:a,onSuccess:e.onSuccess,ual:e.props.ual})))})))))}}]),t}(n.Component),F={fio_address:"",owner_fio_public_key:"",max_fee:"",actor:"",tpid:"tpid@greymass"},U=function(e){Object(u.a)(t,e);var a=Object(i.a)(t);function t(){var e;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=a.call.apply(a,[this].concat(r))).state={account:void 0,balance:void 0,errors:[],fee:void 0,fields:F,show:!1},e.onOpen=function(a,t){e.resetData(),e.getAccount(),e.getBalance(),e.getFee()},e.resetData=function(){return e.setState({account:void 0,balance:void 0,errors:[],fee:void 0,fields:F})},e.getAccount=function(){var a=e.props.ual.activeUser;a.rpc.get_account(a.accountName).then((function(t){e.setState({account:t,fields:Object.assign({},e.state.fields,{actor:a.accountName,owner_fio_public_key:t.permissions.filter((function(e){return"owner"===e.perm_name}))[0].required_auth.keys[0].key})})}))},e.getBalance=function(){var a=e.props.ual.activeUser;a.rpc.get_currency_balance("fio.token",a.accountName,"fio").then((function(a){return e.setState({balance:a})}))},e.getFee=function(){e.props.ual.activeUser.rpc.get_table_rows({code:"fio.fee",table:"fiofees",scope:"fio.fee",key_type:"i128",index_position:2,lower_bound:"0x1a5f09714542254caaab363d520adfbd",upper_bound:"0x1a5f09714542254caaab363d520adfbd",limit:1}).then((function(a){e.setState({fee:a.rows[0],fields:Object.assign({},e.state.fields,{max_fee:a.rows[0].suf_amount})})}))},e.hide=function(){return e.setState({show:!1})},e.show=function(){return e.setState({show:!0})},e.onChange=function(a,t){var n=t.name,r=t.value;return e.setState({fields:Object.assign({},e.state.fields,Object(w.a)({},n,r))})},e.transact=Object(v.a)(I.a.mark((function a(){var t,n,r,c,o;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.state.fields,n=e.props.ual.activeUser,a.prev=2,r=n.accountName,c=n.requestPermission,o={actions:[{account:"fio.address",name:"regaddress",authorization:[{actor:r,permission:c}],data:t}]},a.next=7,n.signTransaction(o,{expireSeconds:120,blocksBehind:3});case 7:e.props.onSuccess(),e.hide(),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(2),e.setState({errors:a.t0.cause.json.fields});case 14:case"end":return a.stop()}}),a,null,[[2,11]])}))),e}return Object(s.a)(t,[{key:"render",value:function(){var e=this,a=this.props.domain,t=this.state,n=t.balance,c=t.errors,o=t.fee,l=t.fields,s=t.show;return r.a.createElement(D.a,{closeIcon:!0,content:r.a.createElement(f.a,{padded:!0,size:"large",style:{marginTop:0}},r.a.createElement(f.a,{color:"blue",secondary:!0},r.a.createElement(N.a,{size:"large"},r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Cell,null,"Current FIO Balance"),r.a.createElement(N.a.Cell,{textAlign:"right"},n?r.a.createElement("strong",null,n[0]):r.a.createElement(L.a,{name:"spinner",loading:!0}))),r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Cell,null,"Address Registration Fee"),r.a.createElement(N.a.Cell,{textAlign:"right"},o?r.a.createElement("strong",null,(o.suf_amount/1e9).toFixed(9)," FIO"):r.a.createElement(L.a,{name:"spinner",loading:!0}))))),r.a.createElement(X.a,{error:c.length,onSubmit:this.transact},Object.keys(l).map((function(a){var t=c.filter((function(e){return e.name===a})),n=Object(T.a)(t,1)[0];return"tpid"!==a&&r.a.createElement(X.a.Field,null,r.a.createElement("label",{style:{textTransform:"capitalize"}},a.replace("_"," ")),r.a.createElement(X.a.Input,{error:!!n&&{content:n.error,pointing:"above"},name:a,onChange:e.onChange,value:l[a]}))})),r.a.createElement(g.a,{error:!0,header:"An error occurred while submitting the transaction",content:"Check the red fields above to correct the problems and try again."}),r.a.createElement(f.a,{basic:!0,clearing:!0},r.a.createElement(S.a,{content:"Register Address",floated:"right",primary:!0})))),header:"Register a FIO Address",open:s,onClose:this.hide,onOpen:this.onOpen,trigger:r.a.createElement(S.a,{basic:!0,content:"New address@".concat(a.name),icon:"plus",onClick:this.show,primary:!0,size:"small"})})}}]),t}(n.Component),H={fio_domain:"",owner_fio_public_key:"",max_fee:"",actor:"",tpid:"tpid@greymass"},j=function(e){Object(u.a)(t,e);var a=Object(i.a)(t);function t(){var e;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=a.call.apply(a,[this].concat(r))).state={account:void 0,balance:void 0,errors:[],fee:void 0,fields:H,show:!1},e.onOpen=function(a,t){e.resetData(),e.getAccount(),e.getBalance(),e.getFee()},e.resetData=function(){return e.setState({account:void 0,balance:void 0,errors:[],fee:void 0,fields:H})},e.getAccount=function(){var a=e.props.ual.activeUser;a.rpc.get_account(a.accountName).then((function(t){e.setState({account:t,fields:Object.assign({},e.state.fields,{actor:a.accountName,owner_fio_public_key:t.permissions.filter((function(e){return"owner"===e.perm_name}))[0].required_auth.keys[0].key})})}))},e.getBalance=function(){var a=e.props.ual.activeUser;a.rpc.get_currency_balance("fio.token",a.accountName,"fio").then((function(a){return e.setState({balance:a})}))},e.getFee=function(){e.props.ual.activeUser.rpc.get_table_rows({code:"fio.fee",table:"fiofees",scope:"fio.fee",key_type:"i128",index_position:2,lower_bound:"0xe7961b95f481a901b3bfa23b800c8fb3",upper_bound:"0xe7961b95f481a901b3bfa23b800c8fb3",limit:1}).then((function(a){e.setState({fee:a.rows[0],fields:Object.assign({},e.state.fields,{max_fee:a.rows[0].suf_amount})})}))},e.hide=function(){return e.setState({show:!1})},e.show=function(){return e.setState({show:!0})},e.onChange=function(a,t){var n=t.name,r=t.value;return e.setState({fields:Object.assign({},e.state.fields,Object(w.a)({},n,r))})},e.transact=Object(v.a)(I.a.mark((function a(){var t,n,r,c,o;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.state.fields,n=e.props.ual.activeUser,a.prev=2,r=n.accountName,c=n.requestPermission,o={actions:[{account:"fio.address",name:"regdomain",authorization:[{actor:r,permission:c}],data:t}]},a.next=7,n.signTransaction(o,{expireSeconds:120,blocksBehind:3});case 7:e.props.onSuccess(),e.hide(),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(2),e.setState({errors:a.t0.cause.json.fields});case 14:case"end":return a.stop()}}),a,null,[[2,11]])}))),e}return Object(s.a)(t,[{key:"render",value:function(){var e=this,a=this.state,t=a.balance,n=a.errors,c=a.fee,o=a.fields,l=a.show;return r.a.createElement(D.a,{closeIcon:!0,content:r.a.createElement(f.a,{padded:!0,size:"large",style:{marginTop:0}},r.a.createElement(f.a,{color:"blue",secondary:!0},r.a.createElement(N.a,{size:"large"},r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Cell,null,"Current FIO Balance"),r.a.createElement(N.a.Cell,{textAlign:"right"},t?r.a.createElement("strong",null,t[0]):r.a.createElement(L.a,{name:"spinner",loading:!0}))),r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Cell,null,"Domain Registration Fee"),r.a.createElement(N.a.Cell,{textAlign:"right"},c?r.a.createElement("strong",null,(c.suf_amount/1e9).toFixed(9)," FIO"):r.a.createElement(L.a,{name:"spinner",loading:!0}))))),r.a.createElement(X.a,{error:n.length,onSubmit:this.transact},Object.keys(o).map((function(a){var t=n.filter((function(e){return e.name===a})),c=Object(T.a)(t,1)[0];return"tpid"!==a&&r.a.createElement(X.a.Field,null,r.a.createElement("label",{style:{textTransform:"capitalize"}},a.replace("_"," ")),r.a.createElement(X.a.Input,{error:!!c&&{content:c.error,pointing:"above"},name:a,onChange:e.onChange,value:o[a]}))})),r.a.createElement(g.a,{error:!0,header:"An error occurred while submitting the transaction",content:"Check the red fields above to correct the problems and try again."}),r.a.createElement(f.a,{basic:!0,clearing:!0},r.a.createElement(S.a,{content:"Register Domain",floated:"right",primary:!0})))),header:"Register a FIO Domain",open:l,onClose:this.hide,onOpen:this.onOpen,trigger:r.a.createElement(S.a,{content:"Register Domain",floated:"right",icon:"plus",onClick:this.show,primary:!0})})}}]),t}(n.Component),k=function(e){Object(u.a)(t,e);var a=Object(i.a)(t);function t(){var e;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=a.call.apply(a,[this].concat(r))).state={addresses:[],domains:[]},e.sync=function(){var a=e.props.ual.activeUser;e.getDomains(a.accountName)},e.onSuccess=function(){e.sync()},e.getDomains=function(a){e.props.ual.activeUser.rpc.get_table_rows({code:"fio.address",table:"domains",scope:"fio.address",key_type:"name",index_position:2,lower_bound:a,upper_bound:a,limit:10}).then((function(a){e.setState({domains:a.rows}),a.rows.length&&a.rows.map(e.getAddresses)}))},e.getAddresses=function(a){e.props.ual.activeUser.rpc.get_table_rows({code:"fio.address",table:"fionames",scope:"fio.address",key_type:"i128",index_position:2,lower_bound:a.domainhash,upper_bound:a.domainhash,limit:10}).then((function(a){e.setState({addresses:Object(B.uniqBy)([].concat(Object(A.a)(e.state.addresses),Object(A.a)(a.rows)),"id")})}))},e}return Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.ual.activeUser&&this.sync()}},{key:"render",value:function(){var e=this,a=this.state,t=a.addresses,n=a.domains;return r.a.createElement(p.a,{fluid:!0},r.a.createElement(f.a,{attached:"top",clearing:!0,secondary:!0},r.a.createElement(O.a,{floated:"left",size:"large"},"FIO Domains",r.a.createElement(O.a.Subheader,null,"Manage the domains you control and address associations.")),r.a.createElement(S.a,{content:"Refresh Data",floated:"right",icon:"refresh",onClick:this.sync}),r.a.createElement(j,{onSuccess:this.onSuccess,ual:this.props.ual})),!n.length&&r.a.createElement(f.a,{attached:"bottom",size:"large",textAlign:"center"},r.a.createElement(O.a,null,"No domains associated to this account. Register one to get started.")),!!n.length&&r.a.createElement(N.a,{attached:"bottom",padded:!0,striped:!0},r.a.createElement(N.a.Header,null,r.a.createElement(N.a.Row,null,r.a.createElement(N.a.HeaderCell,null,"Domain Name"),r.a.createElement(N.a.HeaderCell,null,"Addresses"))),r.a.createElement(N.a.Body,null,n.map((function(a){var n=t.filter((function(e){return e.domain===a.name}));return r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Cell,{collapsing:!0,verticalAlign:"top"},r.a.createElement(O.a,null,"@",a.name),r.a.createElement(N.a,{definition:!0},r.a.createElement(N.a.Body,null,r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Cell,null,"Public"),r.a.createElement(N.a.Cell,null,a.is_public?"True":"False")),r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Cell,null,"Expires"),r.a.createElement(N.a.Cell,null,new Date(1e3*a.expiration).toUTCString()))))),r.a.createElement(N.a.Cell,{textAlign:"right"},n.length?r.a.createElement(N.a,{definition:!0},r.a.createElement(N.a.Body,null,n.map((function(e){return r.a.createElement(N.a.Row,null,r.a.createElement(N.a.Cell,null,e.name),r.a.createElement(N.a.Cell,null,e.addresses[0].public_address,r.a.createElement("br",null),"Expires: ",new Date(1e3*e.expiration).toLocaleDateString()))})))):r.a.createElement(f.a,{textAlign:"left"},r.a.createElement(O.a,{size:"small"},"No associated addresses",r.a.createElement(O.a.Subheader,null,"Create a new FIO address for this domain using the button below."))),r.a.createElement(U,{domain:a,onSuccess:e.onSuccess,ual:e.props.ual})))})))))}}]),t}(n.Component),x=function(e){Object(u.a)(t,e);var a=Object(i.a)(t);function t(){return Object(l.a)(this,t),a.apply(this,arguments)}return Object(s.a)(t,[{key:"render",value:function(){var e=this.props.ual,a=e.chains,t=[{menuItem:"Address Management",render:function(){return r.a.createElement(C.a.Pane,null,r.a.createElement(P,{ual:e}))}},{menuItem:"Domain Management",render:function(){return r.a.createElement(C.a.Pane,null,r.a.createElement(k,{ual:e}))}}];return r.a.createElement(p.a,{style:{margin:"3em 0"}},r.a.createElement(h.a,{relaxed:!0},r.a.createElement(h.a.Row,null,r.a.createElement(h.a.Column,{width:10},r.a.createElement(O.a,{size:"large"},"FIO Registration Helper",r.a.createElement(O.a.Subheader,null,"A tool to assist with domain and address registration."))),r.a.createElement(h.a.Column,{width:6,textAlign:"right"},r.a.createElement(b,{ual:e}))),"b20901380af44ef59c5918439a1f9a41d83669020319a80574b804a5f95cbd7e"===a[0].chainId?r.a.createElement(h.a.Row,{columns:1},r.a.createElement(h.a.Column,null,r.a.createElement(g.a,{content:"This app is in testing mode and uses the FIO Testnet (".concat(a[0].chainId,")."),header:"TESTNET Mode",icon:"warning sign",size:"large",warning:!0}))):r.a.createElement(h.a.Row,{columns:1},r.a.createElement(h.a.Column,null,r.a.createElement(g.a,{content:"This app is in BETA and is connected to the FIO Mainnet (".concat(a[0].chainId,")."),header:"FIO Mainnet",icon:"info circle",info:!0,size:"large"}))),r.a.createElement(h.a.Row,{columns:1},r.a.createElement(h.a.Column,null,e.activeUser?r.a.createElement(C.a,{menu:{attached:"top",icon:"home",size:"huge",tabular:!0},panes:t}):r.a.createElement(f.a,{size:"large",stacked:!0,textAlign:"center"},r.a.createElement("p",null,"Login to manage domains and addresses for the FIO blockchain."),r.a.createElement(b,{ual:e}))))))}}]),t}(n.Component),G={chainId:"21dcae42c0182200e93f954a074011f9048a7624c6fe81d3c9541a614a88bd1c",name:"FIO",rpcEndpoints:[{protocol:"https",host:"fio.greymass.com",port:443}]},V={chainId:"b20901380af44ef59c5918439a1f9a41d83669020319a80574b804a5f95cbd7e",name:"FIO Testnet",rpcEndpoints:[{protocol:"https",host:"fiotestnet.greymass.com",port:443}]},K=function(e){Object(u.a)(t,e);var a=Object(i.a)(t);function t(){return Object(l.a)(this,t),a.apply(this,arguments)}return Object(s.a)(t,[{key:"render",value:function(){console.log(window.location.search);var e=G;"?testnet"===window.location.search&&(e=V);var a=new d.Anchor([e],{appName:"fio-register"}),t=new m.Scatter([e],{appName:"fio-register"});return r.a.createElement(E.UALProvider,{appName:"FIO Registration",authenticators:[a,t],chains:[e]},r.a.createElement(Z,null),r.a.createElement(f.a,{basic:!0,textAlign:"center"},"b20901380af44ef59c5918439a1f9a41d83669020319a80574b804a5f95cbd7e"===e.chainId?r.a.createElement("a",{href:"/fio-register"},"Switch to use FIO Mainnet"):r.a.createElement("a",{href:"/fio-register?testnet"},"Switch to use FIO Testnet")))}}]),t}(n.Component),Z=Object(E.withUAL)(x),Y=function(){return r.a.createElement(K,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(814);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[409,1,2]]]);
//# sourceMappingURL=main.d4b013db.chunk.js.map